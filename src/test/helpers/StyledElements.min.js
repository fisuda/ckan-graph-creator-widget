null==window.StyledElements&&(window.StyledElements={}),function(){"use strict";var a={};a.gettext=function(a){return a},a.ngettext=function(a,b,c){return 1==c?a:b},a.interpolate=function(a,b){return a.replace(/%\(\w+\)s/g,function(a){return String(b[a.slice(2,-2)])})},a.Template=function(a){this.template=a},a.Template.prototype.evaluate=function(b){return a.interpolate(this.template,b)},a.stopPropagationListener=function(a){a.stopPropagation()},a.preventDefaultListener=function(a){a.preventDefault()},a.callCallback=function(a){if("function"==typeof a)try{a.apply(null,Array.prototype.slice.call(arguments,1))}catch(b){}},a.onFullscreenChange=function(a,b){a instanceof StyledElements.StyledElement&&(a=a.wrapperElement),a.ownerDocument.addEventListener("fullscreenchange",b,!0),a.ownerDocument.addEventListener("msfullscreenchange",b,!0),a.ownerDocument.addEventListener("mozfullscreenchange",b,!0),a.ownerDocument.addEventListener("webkitfullscreenchange",b,!0)},a.removeFullscreenChangeCallback=function(a,b){a instanceof StyledElements.StyledElement&&(a=a.wrapperElement),a.ownerDocument.removeEventListener("fullscreenchange",b,!0),a.ownerDocument.removeEventListener("msfullscreenchange",b,!0),a.ownerDocument.removeEventListener("mozfullscreenchange",b,!0),a.ownerDocument.removeEventListener("webkitfullscreenchange",b,!0)},a.isFullscreenSupported=function(){return"fullscreenEnabled"in document?document.fullscreenEnabled:"mozFullScreenEnabled"in document?document.mozFullScreenEnabled:"webkitFullscreenEnabled"in document?document.webkitFullscreenEnabled:void 0};var b=function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(this[a]=void 0)};a.split=function(c,d,e){if(!(d instanceof RegExp))return c.split(d,e);var f,g,h,i,j=[],k=0,l=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.sticky?"y":"");if(d=new RegExp(d.source,l+"g"),c+="",a.split._compliantExecNpcg||(f=new RegExp("^"+d.source+"$(?!\\s)",l)),void 0===e||0>+e)e=1/0;else if(e=Math.floor(+e),!e)return[];for(;(g=d.exec(c))&&(h=g.index+g[0].length,!(h>k&&(j.push(c.slice(k,g.index)),!a.split._compliantExecNpcg&&g.length>1&&g[0].replace(f,b.bind(g)),g.length>1&&g.index<c.length&&Array.prototype.push.apply(j,g.slice(1)),i=g[0].length,k=h,j.length>=e)));)d.lastIndex===g.index&&d.lastIndex++;return k===c.length?(i||!d.test(""))&&j.push(""):j.push(c.slice(k)),j.length>e?j.slice(0,e):j},a.split._compliantExecNpcg=void 0===/()??/.exec("")[1],a.split._nativeSplit=String.prototype.split,a.hasWord=function(a,b){return null!=a.match(new RegExp("(^\\s*|\\s+)"+b+"(\\s+|\\s*$)","g"))},a.removeWord=function(a,b){return a.replace(new RegExp("(^\\s*|\\s+)"+b+"(\\s+|\\s*$)","g")," ").trim()},a.appendWord=function(b,c){return a.removeWord(b,c)+(" "+c)},a.prependWord=function(b,c){return c+" "+a.removeWord(b,c)},a.escapeRegExp=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var c=document.createElement("div");a.escapeHTML=function(a){return c.textContent=a,c.innerHTML},String.prototype.startsWith?a.startsWith=function(a,b,c){return a.startsWith(b,c)}:a.startsWith=function(a,b,c){return c=c||0,a.indexOf(b,c)===c},String.prototype.endsWith?a.endsWith=function(a,b,c){return a.endsWith(b,c)}:a.endsWith=function(a,b,c){c=c||a.length,c-=b.length;var d=a.lastIndexOf(b);return-1!==d&&d===c},a.getRelativePosition=function(a,b){if(a===b)return{x:0,y:0};var c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return{x:c.left-d.left,y:c.top-d.top}},a.XML={},a.XML.isElement=function(a){return a&&"nodeType"in a&&1===a.nodeType},window.Attr?a.XML.isAttribute=function(a){return a instanceof Attr}:a.XML.isAttribute=function(a){return a&&"nodeType"in a&&2===a.nodeType},null!=document.createElementNS?a.XML.createElementNS=function(a,b,c){return b?a.createElementNS(b,c):a.createElement(c)}:a.XML.createElementNS=function(a,b,c){return a.createNode(1,c,b?b:"")},null!=document.documentElement.getAttributeNS?a.XML.getAttributeNS=function(a,b,c){return a.getAttributeNS(b,c)}:a.XML.getAttributeNS=function(a,b,c){for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d];if(e.baseName==c&&e.namespaceURI==b)return e.nodeValue}return""},null!=document.documentElement.hasAttribute?a.XML.hasAttribute=function(a,b){return a.hasAttribute(b)}:a.XML.hasAttribute=function(a,b){return null!==a.getAttribute(b)},null!=document.documentElement.hasAttributeNS?a.XML.hasAttributeNS=function(a,b,c){return a.hasAttributeNS(b,c)}:a.XML.hasAttributeNS=function(a,b,c){for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d];if(e.baseName==c&&e.namespaceURI==b)return!0}return!1},null!=document.documentElement.setAttributeNS?a.XML.setAttributeNS=function(a,b,c,d){a.setAttributeNS(b,c,d)}:a.XML.setAttributeNS=function(a,b,c,d){var e;"createNode"in a.ownerDocument||alert("setAttributeNS is not supported in this browser"),e=a.ownerDocument.createNode(2,c,b),e.nodeValue=d,a.setAttributeNode(e)},document.implementation&&document.implementation.createDocument?a.XML.createDocument=function(a,b,c){return document.implementation.createDocument(a,b,null)}:window.ActiveXObject?a.XML.createDocument=function(b,c,d){var e=new ActiveXObject("MSXML2.DOMDocument");return e.appendChild(a.XML.createElementNS(e,b,c)),e}:a.XML.createDocument=function(a,b,c){alert("createDocument is not supported in this browser")},window.DOMParser?a.XML.parseFromString=function(a,b,c){var d,e,f=new DOMParser;return c=void 0!==c?c:!0,c&&(d=a.match(new RegExp('<\\?xml(?:[^/]|/[^>])*standalone="([^"]+)"(?:[^/]|/[^>])*\\?>')),e=!d||"yes"!==d[1]&&"no"!==d[1]?'<?xml version="1.0" ?>':'<?xml version="1.0" standalone="'+d[1]+'" ?>',a=a.replace(/<\?xml([^\/]|\/[^>])*\?>/g,e)),f.parseFromString(a,b)}:window.ActiveXObject?a.XML.parseFromString=function(a,b,c){var d=new ActiveXObject("Microsoft.XMLDOM");return d.async=!1,d.loadXML(a),d}:a.XML.parseFromString=function(a,b,c){var d=new XMLHttpRequest;return d.open("GET","data:"+(b||"application/xml")+";charset=utf-8,"+encodeURIComponent(a),!1),d.overrideMimeType&&d.overrideMimeType(b),d.send(null),d.responseXML},window.XMLSerializer?a.XML.serializeXML=function(a){return(new XMLSerializer).serializeToString(a)}:a.XML.serializeXML=function(a){if(a.xml)return a.xml;throw"Error serializating xml"},document.evaluate?a.XML.getChildElementByTagNameNS=function(a,b,c){var d=a.ownerDocument.evaluate("s:"+c,a,function(a){return"s"===a?b:null},XPathResult.FIRST_ORDERED_NODE_TYPE,null);return d.singleNodeValue}:a.XML.getChildElementByTagNameNS=function(a,b,c){var d,e;for(d=0;d<a.childNodes.length;d++)if(e=a.childNodes[d],e.namespaceURI===b&&e.localName===c)return e;return null},a.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},a.clone=function(a){var b;if(null==a)return a;b=Array.isArray(a)?[]:{};for(var c in a)b[c]=a[c];return b},a.cloneObject=function(b){var c={};if(e(b))return c;if(!a.isPlainObject(b))throw new TypeError("[error description]");for(var f in b)c[f]=d.call(a,b[f]);return c};var d=function(b){return e(b)?null:a.isPlainObject(b)?this.cloneObject(b):Array.isArray(b)?b.slice():b};a.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},a.removeFromParent=function(a){null!=a.parentNode&&a.parentNode.removeChild(a)},a.merge=function(a,b){if(null!=b)for(var c in b)a[c]=b[c];return a},a.updateObject=function(b,c){b=a.cloneObject(b),c=a.cloneObject(c);for(var d in c)b[d]=h.call(a,b[d],c[d]);return b};var e=function(a){return"undefined"==typeof a||null===a};a.isPlainObject=function(a){return"object"!=typeof a||null===a?!1:a.constructor&&!Object.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf")?!1:!0};var f=function(a,b){var c,d,e=!1;if("function"!=typeof a||"function"!=typeof b)return e;for(c=a.prototype,d=b.prototype;!(e=c===d)&&(d=Object.getPrototypeOf(d),null!==d&&(d!==Object.prototype||c===d)););return e},g=function(a,b){return a.constructor===b.constructor},h=function(b,c){return e(c)?e(b)&&(b=null):"function"==typeof c?(e(b)||f(b,c))&&(b=c):a.isPlainObject(c)?(e(b)||a.isPlainObject(b))&&(b=this.updateObject(b,c)):Array.isArray(c)?(e(b)&&(b=[]),Array.isArray(b)&&(b=b.concat(c))):(e(b)||g(b,c))&&(b=c),b};Object.hasOwnProperty("create")||(Object.create=function(a){var b;return b=function(){},b.prototype=a,new b});var i=function(a,b){for(var c in b)a.prototype[c]=b[c]},j=function(a,b){for(var c in b)a[c]=b[c]},k=function(a,b){b.forEach(function(b){i(a,b.prototype)}),a.prototype.mixinClass=function(a){b[a].apply(this,Array.prototype.slice.call(arguments,1))}};a.inherit=function(a,b){var c=0;a.prototype=Object.create(b.prototype),i(a,{constructor:a,superConstructor:b,superClass:function(){for(var a=b,d=0;c>d;d++)a=a.prototype.superConstructor;c++;try{a.apply(this,Array.prototype.slice.call(arguments))}catch(e){throw c=0,e}c--},superMember:function(a,b){var c=Array.prototype.slice.call(arguments,2);return a.prototype[b].apply(this,c)}})},a.defineClass=function(b){return"inherit"in b&&a.inherit(b.constructor,b.inherit),"mixins"in b&&k(b.constructor,b.mixins),"statics"in b&&j(b.constructor,b.statics),"members"in b&&i(b.constructor,b.members),b.constructor},a.capitalize=function(a){return a.charAt(0).toUpperCase()+a.substring(1)};var l=["bytes","KB","MB","GB","TB"];Object.freeze(l),a.formatSize=function(b){if(null==b)return a.gettext("N/A");for(var c=0;c<l.length&&!(1024>b);c++)b/=1024;return b.toFixed(2)+" "+l[c]},StyledElements.Utils=a}(),function(){"use strict";var a=function(a){Object.defineProperties(this,{context:{value:a},handlers:{value:[]}})};a.prototype.on=function(a){if("function"!=typeof a)throw new TypeError("Handlers must be functions");this.handlers.push(a)},a.prototype.off=function(a){if(null==a)this.handlers.length=0;else{var b=this.handlers.indexOf(a);-1!=b&&this.handlers.splice(b,1)}},a.prototype.trigger=function(){for(var a=0;a<this.handlers.length;a++)try{this.handlers[a].apply(this.context,arguments)}catch(b){null!=window.console&&"function"==typeof window.console.error&&console.error(b)}},a.prototype.addEventListener=function(a){this.on(a)},a.prototype.removeEventListener=function(a){if("function"!=typeof a)throw new TypeError("Handlers must be functions");this.off(a)},a.prototype.clearEventListeners=function(){this.off()},a.prototype.dispatch=function(){this.trigger.apply(this,arguments)},StyledElements.Event=a}(),function(a,b){"use strict";a.ObjectWithEvents=b.defineClass({constructor:function(b){this.events={},(Array.isArray(b)?b:[]).forEach(function(b){this.events[b]=new a.Event(this)},this)},members:{off:function(a,b){a="string"!=typeof a?"":a.trim(),a=a?a.split(/\s+/):Object.keys(this.events);for(var c=0;c<a.length;c++)this.events[a[c]].off(b);return this},on:function(a,b){if(a="string"!=typeof a?"":a.trim()){a=a.split(/\s+/);for(var c=0;c<a.length;c++)this.events[a[c]].on(b)}return this},trigger:function(a){var c;if(!(a in this.events))throw new Error(b.interpolate("Unhandled event '%(name)s'",{name:a}));return c=[this].concat(Array.prototype.slice.call(arguments,1)),this.events[a].trigger.apply(this.events[a],c),this},addEventListener:function(a,c){if(!(a in this.events))throw new Error(b.interpolate("Unhandled event '%(name)s'",{name:a}));return this.events[a].addEventListener(c),this},clearEventListeners:function(a){if("string"!=typeof a){for(a in this.events)this.events[a].clearEventListeners();return this}if(!(a in this.events))throw new Error(b.interpolate("Unhandled event '%(name)s'",{name:a}));return this.events[a].clearEventListeners(),this},destroy:function(){return this.events=null,this},removeEventListener:function(a,c){if(!(a in this.events))throw new Error(b.interpolate("Unhandled event '%(name)s'",{name:a}));return this.events[a].removeEventListener(c),this}}})}(StyledElements,StyledElements.Utils),function(a,b){"use strict";a.StyledElement=b.defineClass({constructor:function(a){this.wrapperElement=null,this.parentElement=null,Object.defineProperties(this,{enabled:{get:function(){return!this.hasClassName("disabled")},set:function(a){a=!!a,this.enabled!==a&&this.toggleClassName("disabled",!a)._onenabled(a)}},hidden:{get:function(){return this.hasClassName("hidden")},set:function(a){this.toggleClassName("hidden",a)._onhidden(a)}}}),Array.isArray(a)||(a=[]),this.mixinClass(0,["hide","show"].concat(a))},mixins:[a.ObjectWithEvents],members:{_onenabled:function(a){},_onhidden:function(a){},addClassName:function(a){if(!Array.isArray(a)){if(a=null==a?"":a.toString().trim(),""===a)return;a=a.split(/\s+/)}return a.forEach(c,this),this},appendTo:function(a){return this.insertInto(a)},disable:function(){return this.enabled=!1,this},enable:function(){return this.enabled=!0,this},get:function(){return this.wrapperElement},hide:function(){return this.hidden||(this.hidden=!0,this.events.hide.trigger(this)),this},parent:function(){return null!=this.parentElement?this.parentElement.get():this.get().parentElement},prependTo:function(b){return b instanceof a.StyledElement?b.prependChild(this):this.insertInto(b,b.firstChild)},remove:function(){return null!=this.parentElement?this.parentElement.remove(this):null!=this.get().parentElement&&this.get().parentElement.removeChild(this.get()),this},replaceClassName:function(a,b){return this.removeClassName(a),this.addClassName(b),this},show:function(){return this.hidden&&(this.hidden=!1,this.events.show.trigger(this)),this},style:function(a,b){if(1===arguments.length){if("string"==typeof a)return this.get().style[a];for(var c in a)this.get().style[c]=a[c]}else this.get().style[a]=null!=b?b:"";return this},toggleClassName:function(a,b){if(a="string"!=typeof a?"":a.trim(),a.length)if("boolean"!=typeof b)a.split(/\s+/).forEach(function(a){this.get().classList.contains(a)?this.get().classList.remove(a):this.get().classList.add(a)},this);else{var c=b?"add":"remove";a.split(/\s+/).forEach(function(a){this.get().classList[c](a)},this)}return this},_getUsableHeight:function(){var a=this.wrapperElement.parentNode;if(!StyledElements.Utils.XML.isElement(a))return null;var b=document.defaultView.getComputedStyle(a,null);if(null==b.getPropertyCSSValue("display"))return null;var c=document.defaultView.getComputedStyle(this.wrapperElement,null),d=a.offsetHeight-b.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-b.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX);return d},_getUsableWidth:function(){var a=this.wrapperElement.parentNode;if(!StyledElements.Utils.XML.isElement(a))return null;var b=document.defaultView.getComputedStyle(a,null),c=document.defaultView.getComputedStyle(this.wrapperElement,null),d=a.offsetWidth-b.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX)-b.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX);return d},getBoundingClientRect:function(){return this.wrapperElement.getBoundingClientRect()},hasClassName:function(a){return a=null==a?"":a.toString().trim(),this.get().classList.contains(a)},insertInto:function(a,b){return a instanceof StyledElements.StyledElement&&(a=a.wrapperElement),b instanceof StyledElements.StyledElement&&(b=b.wrapperElement),b?a.insertBefore(this.wrapperElement,b):a.appendChild(this.wrapperElement),this},removeClassName:function(a){return Array.isArray(a)||(a=null==a?"":a.toString().trim(),""===a&&this.get().removeAttribute("class"),a=a.split(/\s+/)),a.forEach(d,this),this},repaint:function(a){return this},setDisabled:function(a){return a?this.disable():this.enable()}}});var c=function(a){this.get().classList.add(a)},d=function(a){this.get().classList.remove(a)}}(StyledElements,StyledElements.Utils),function(){"use strict";var a=function(a,b){this.inputElement=null,this.defaultValue=a,StyledElements.StyledElement.call(this,b)};a.prototype=new StyledElements.StyledElement,a.prototype.getValue=function(){return this.inputElement.value},a.prototype.setValue=function(a){return this.inputElement.value=a,this},a.prototype.reset=function(){return this.setValue(this.defaultValue)},a.prototype.enable=function(){return StyledElements.StyledElement.prototype.enable.call(this),this.inputElement.disabled=!1,this},a.prototype.disable=function(){return StyledElements.StyledElement.prototype.disable.call(this),this.inputElement.disabled=!0,this},a.prototype.focus=function(){return this.inputElement.focus(),this},StyledElements.InputElement=a}(),function(){"use strict";var a=function(a,b,c){var d=!1,e=[],f=0,g=null,h=function j(){if(c(f,a)){var b=g[f]-(new Date).getTime();0>b&&(b=0),f++,setTimeout(j,b)}else i()},i=function(){var c;do c=e.shift();while(void 0!==c&&!(g=b(a,c)));if(void 0!==c){f=0;var i=g[f]-(new Date).getTime();0>i&&(i=0),setTimeout(h,i)}else d=!1};this.addCommand=function(a){void 0!==a&&(e.push(a),d||(d=!0,i()))}};StyledElements.CommandQueue=a}(),function(a,b){"use strict";a.Container=b.defineClass({constructor:function(a,d){a=b.merge(b.clone(c),a),this.superClass(d),this.wrapperElement=document.createElement(a.tagname),this.wrapperElement.className="se-container",this.children=[],this.useFullHeight=a.useFullHeight,a.id&&this.wrapperElement.setAttribute("id",a.id),this.addClassName(a["class"]),this.addClassName(a.extraClass)},inherit:a.StyledElement,members:{has:function(b){return b instanceof a.StyledElement&&-1!==this.children.indexOf(b)?!0:b.parentElement==this.get()},prepend:function(b,c){return b instanceof a.StyledElement&&this.children.push(b),this.superMember(a.StyledElement,"prepend",b,c)},remove:function(b){var c;if(null==b)return this.superMember(a.StyledElement,"remove",b);if(b instanceof a.StyledElement){if(-1===(c=this.children.indexOf(b)))return this;this.children.splice(c,1),b.parentElement=null,b=b.get()}return b.parentElement===this.get()&&this.get().removeChild(b),this},appendChild:function(a,b){return a instanceof StyledElements.StyledElement?(a.insertInto(this.wrapperElement,b),a.parentElement=this,this.children.push(a),this):("string"==typeof a&&(a=document.createTextNode(a)),b instanceof StyledElements.StyledElement&&(b=b.get()),null!=b?this.wrapperElement.insertBefore(a,b):this.wrapperElement.appendChild(a),this)},prependChild:function(a,b){return this.appendChild(a,this.get().firstChild)},removeChild:function(a){if(null==a)throw new TypeError("missing element parameter");return this.remove(a)},repaint:function(a){if(a=void 0!==a?a:!1,this.useFullHeight){if(this.wrapperElement.classList.contains("hidden"))return void(this.wrapperElement.style.height="");var b=this._getUsableHeight();if(null==b)return;this.wrapperElement.style.height=b+"px"}for(var c=0;c<this.children.length;c++)this.children[c].repaint(a);null!=this.disabledLayer&&(this.disabledLayer.style.height=this.wrapperElement.scrollHeight+"px",this.disabledLayer.style.lineHeight=this.wrapperElement.clientHeight+"px")},clear:function(){return this.children=[],this.wrapperElement.innerHTML="",this.wrapperElement.scrollTop=0,this.wrapperElement.scrollLeft=0,null!=this.disabledLayer&&this.wrapperElement.appendChild(this.disabledLayer),this},text:function(a){return null==a?this.get().textContent:(this.children=[],void(this.wrapperElement.textContent=""+a))},isDisabled:function(){return null!=this.disabledLayer},_onenabled:function(a){a?(this.disabledLayer.parentNode.removeChild(this.disabledLayer),this.disabledLayer=null,this.disable_icon=null):(this.disabledLayer=document.createElement("div"),this.disabledLayer.className="se-container-disable-layer",this.disabled_icon=document.createElement("i"),this.disabled_icon.className="disable-icon icon-spin icon-spinner",this.disabledLayer.appendChild(this.disabled_icon),this.wrapperElement.appendChild(this.disabledLayer),this.disabledLayer.style.height=this.wrapperElement.scrollHeight+"px",this.disabledLayer.style.lineHeight=this.wrapperElement.clientHeight+"px")}}});var c={"class":"",id:"",extraClass:"",tagname:"div",useFullHeight:!1}}(StyledElements,StyledElements.Utils),function(){"use strict";var a=function(a){a.preventDefault(),a.stopPropagation(),this._related_input&&this._related_input.focus()},b=function(b){var c={text:null,title:"","class":""};b=StyledElements.Utils.merge(c,b),StyledElements.StyledElement.call(this,[]),this.wrapperElement=document.createElement("span"),this.wrapperElement.className=StyledElements.Utils.appendWord(b["class"],"add-on"),b.title&&this.setTitle(b.title),b.text&&this.setLabel(b.text),this._clickCallback=a.bind(this),this.wrapperElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._clickCallback,!0)};b.prototype=new StyledElements.Container,b.prototype.setDisabled=function(a){a?this.addClassName("disabled"):this.removeClassName("disabled"),this.enabled=!a},b.prototype.setLabel=function(a){this.clear(),this.wrapperElement.textContent=a},b.prototype.setTitle=function(a){this.wrapperElement.setAttribute("title",a)},b.prototype.assignInput=function(a){this._related_input=a},b.prototype.destroy=function(){this.wrapperElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._clickCallback,!0),delete this.wrapperElement,delete this._clickCallback,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Addon=b}(),function(){"use strict";var a=function(a){var b={"class":"",exclusive:!0,full:!0};a=StyledElements.Utils.merge(b,a),this.exclusive=a.exclusive,this.full=a.full,this.children=[],this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.appendWord(a["class"],"styled_accordion")};a.prototype=new StyledElements.StyledElement,a.prototype.createContainer=function(a){var b,c={listenOnTitle:!0};return a=StyledElements.Utils.merge(c,a),b=new StyledElements.Expander(a),b.insertInto(this.wrapperElement),this.exclusive?b.addEventListener("expandChange",function(a,b){var c;b?(c=this.currentContainer,this.currentContainer=a,c&&(c.setExpanded(!1),c.wrapperElement.style.height="")):this.currentContainer===a&&(a.wrapperElement.style.height="",this.currentContainer=null),this.repaint()}.bind(this)):this.full&&b.addEventListener("expandChange",function(a){this.repaint()}.bind(this)),this.children.push(b),null==this.currentContainer&&b.setExpanded(!0),b},a.prototype.repaint=function(a){var b,c,d;if(b=this._getUsableHeight(),null!=b&&null!=this.currentContainer){for(d=0;d<this.children.length;d+=1)this.children[d]!==this.currentContainer&&(c=document.defaultView.getComputedStyle(this.currentContainer.wrapperElement,null),b-=this.children[d].wrapperElement.offsetHeight,b-=c.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX));c=document.defaultView.getComputedStyle(this.currentContainer.wrapperElement,null),b-=c.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX),this.currentContainer.wrapperElement.style.height=b+"px",this.currentContainer.repaint(a)}},a.prototype.destroy=function(){var a;for(a=0;a<this.children.length;a+=1)this.children[a].destroy();this.children=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Accordion=a}(),function(){"use strict";var a=function(a){var b={buttonFloat:"left","class":"",expandButton:!0,listenOnTitle:!1,state:"default",title:null};if(a=StyledElements.Utils.merge(b,a),!a.expandButton&&!a.listenOnTitle)throw new TypeError;StyledElements.StyledElement.call(this,["expandChange"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.appendWord("panel se-expander",a["class"]),null!=a.state&&""!==a.state.trim()&&this.addClassName("panel-"+a.state);var c=document.createElement("div");c.className="panel-heading",this.wrapperElement.appendChild(c),this.toggleButton=null,a.expandButton&&(this.toggleButton=new StyledElements.ToggleButton({"class":"icon-expand",plain:!0}),this.toggleButton.insertInto(c)),this.titleContainer=new StyledElements.Container({"class":"title"}),this.titleContainer.insertInto(c),a.title&&this.titleContainer.appendChild(document.createTextNode(a.title)),this.contentContainer=new StyledElements.Container({"class":"panel-body"}),this.contentContainer.insertInto(this.wrapperElement);var d=function(){this.setExpanded(!this.isExpanded())}.bind(this);this.toggleButton&&this.toggleButton.addEventListener("click",d),a.listenOnTitle&&(this.titleContainer.wrapperElement.style.cursor="pointer",this.titleContainer.wrapperElement.addEventListener("click",d,!1))};a.prototype=new StyledElements.StyledElement,a.prototype.repaint=function(a){var b,c;if(this.isExpanded()){if(b=this.wrapperElement.clientHeight,null==b)return;c=document.defaultView.getComputedStyle(this.titleContainer.wrapperElement,null),b-=this.titleContainer.wrapperElement.offsetHeight,b-=c.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),c=document.defaultView.getComputedStyle(this.contentContainer.wrapperElement,null),b-=c.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),0>b&&(b=0),this.contentContainer.wrapperElement.style.height=b+"px",this.contentContainer.repaint(a)}},a.prototype.isExpanded=function(){return this.hasClassName("expanded")},a.prototype.setExpanded=function(a){this.isExpanded()!=a&&(a?this.addClassName("expanded"):(this.removeClassName("expanded"),this.contentContainer.wrapperElement.style.height=""),this.toggleButton&&(this.toggleButton.active=a),this.events.expandChange.dispatch(this,a))},a.prototype.getTitleContainer=function(){return this.titleContainer},a.prototype.appendChild=function(a){this.contentContainer.appendChild(a)},a.prototype.removeChild=function(a){this.contentContainer.removeChild(a)},a.prototype.clear=function(){this.contentContainer.clear()},StyledElements.Expander=a}(),function(){"use strict";var a=function(a){var b;Array.isArray(a)?this.elements=a:"string"==typeof a?(b=document.createElement("div"),b.innerHTML=a,this.elements=Array.prototype.slice.call(b.childNodes)):this.elements=[]};a.prototype=new StyledElements.StyledElement,a.prototype.insertInto=function(a,b){var c,d;for(b instanceof StyledElements.StyledElement&&(b=b.wrapperElement),c=0;c<this.elements.length;c+=1)d=this.elements[c],d instanceof StyledElements.StyledElement?d.insertInto(a,b):a.insertBefore(d,b)},a.prototype.repaint=function(){var a;for(a=0;a<this.elements.length;a++)"function"==typeof this.elements[a].repaint&&this.elements[a].repaint();return this},a.prototype.appendChild=function(a){return this.elements.push(a),this},StyledElements.Fragment=a}(),function(){"use strict";var a,b,c;b=function(a,b){"function"==typeof this.pOptions.processFunc&&this.pOptions.processFunc(a,b),this.currentPage=parseInt(b.current_page,10),this.currentElements=a,this.totalCount!==b.total_count&&(this.totalCount=b.total_count,this._calculatePages(),this.events.paginationChanged.dispatch(this)),this.events.requestEnd.dispatch(this)},c=function(a){this.currentElements=[],null==a&&(a={message:"unknown cause"}),this.events.requestEnd.dispatch(this,a)},a=function(a){var b={pageSize:25,requestFunc:null,processFunc:null};StyledElements.ObjectWithEvents.call(this,["optionsChanged","paginationChanged","requestStart","requestEnd"]),this.pOptions=StyledElements.Utils.merge(b,a),this.currentPage=1,this.currentElements=[],this.totalPages=1},a.prototype=new StyledElements.ObjectWithEvents,a.prototype.getCurrentPage=function(){return this.currentElements},a.prototype.changeOptions=function(a){var b,c,d,e=!1;if("object"==typeof a){for(d in a)"pageSize"===d?(b=parseInt(a.pageSize,10),isNaN(b)||b===this.pOptions.pageSize||(e=!0,c=(this.currentPage-1)*this.pOptions.pageSize,this.currentPage=Math.floor(c/b)+1,this.pOptions.pageSize=b,this._calculatePages())):(e=!0,this.pOptions[d]=a[d],this.currentPage=1);e&&(this.events.optionsChanged.dispatch(this,this.pOptions),this.refresh())}},a.prototype.goToFirst=function(){this.changePage(0)},a.prototype.goToPrevious=function(){this.changePage(this.currentPage-1)},a.prototype.goToNext=function(){this.changePage(this.currentPage+1)},a.prototype.goToLast=function(){this.changePage(this.totalPages)},a.prototype._calculatePages=function(){0===this.pOptions.pageSize?this.totalPages=1:(this.totalPages=Math.ceil(this.totalCount/this.pOptions.pageSize),this.totalPages<=0&&(this.totalPages=1))},a.prototype.refresh=function(){this.events.requestStart.dispatch(this),this.pOptions.requestFunc(this.currentPage,this.pOptions,b.bind(this),c.bind(this))},a.prototype.changePage=function(a){1>a?a=1:a>this.totalPages&&(a=this.totalPages),this.events.requestStart.dispatch(this),this.pOptions.requestFunc(a,this.pOptions,b.bind(this),c.bind(this))},StyledElements.PaginatedSource=a}(),function(){"use strict";var a,b,c,d,e,f,g;f="http://wirecloud.conwet.fi.upm.es/StyledElements",g="http://wirecloud.conwet.fi.upm.es/Template",b=function(a,b,c){var d,e,f,g;if(f=b[a.localName],"function"==typeof f){if(d=a.textContent.trim(),""!==d)try{e=JSON.parse(d)}catch(h){}g=f(e,b,c)}else g=f;return g=g instanceof StyledElements.StyledElement||g instanceof HTMLElement?g:null!=g?a.ownerDocument.createTextNode(g):a.ownerDocument.createTextNode("")},c=function h(a,c,d,e){var i,j,k,l;for(i=0;i<c.childNodes.length;i+=1)j=c.childNodes[i],StyledElements.Utils.XML.isElement(j)&&(j.namespaceURI===f?(k=a.build(j,d,e),k.insertInto(c,j),c.removeChild(j)):j.namespaceURI===g?(l=b(j,d,e),l instanceof StyledElements.StyledElement?l.insertInto(c,j):c.insertBefore(l,j),c.removeChild(j)):h(a,j,d,e))},d=function(a,d,e,h){var i,j,k,l;for(j=Array.prototype.slice.call(d.childNodes,0),i=0;i<j.length;i+=1)k=j[i],StyledElements.Utils.XML.isElement(k)&&(k.namespaceURI===f?(l=a.build(k,e,h),j[i]=l):k.namespaceURI===g?j[i]=b(k,e,h):c(a,k,e,h));return new StyledElements.Fragment(j)},e=function(a){var b,c;if(b=null,c=StyledElements.Utils.XML.getChildElementByTagNameNS(a,"http://wirecloud.conwet.fi.upm.es/StyledElements","options"),null!=c){c.parentNode.removeChild(c);try{b=JSON.parse(c.textContent)}catch(d){}}return b},a=function(){var a={borderlayout:function(a,b,c,f,g){var h=new StyledElements.BorderLayout(c),i=function(b,h,i){var j,k;j=StyledElements.Utils.XML.getChildElementByTagNameNS(b,"http://wirecloud.conwet.fi.upm.es/StyledElements",h),null!=j&&(c=e(j),null!=c&&"class"in c&&i.addClassName(c["class"]),k=d(a,j,f,g),i.appendChild(k))};return i(b,"northcontainer",h.getNorthContainer()),i(b,"westcontainer",h.getWestContainer()),i(b,"centercontainer",h.getCenterContainer()),i(b,"eastcontainer",h.getEastContainer()),i(b,"southcontainer",h.getSouthContainer()),h},button:function(a,b,c){return c=StyledElements.Utils.merge({},c),c.text=b.textContent,
new StyledElements.Button(c)},select:function(a,b,c){return new StyledElements.Select(c)}};this.build=function(b,c,d){var f,g;return f=a[b.localName],g=e(b),f(this,b,g,c,d)}},a.prototype.DEFAULT_OPENING='<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml">',a.prototype.DEFAULT_CLOSING="</s:styledgui>",a.prototype.parse=function(a,b,c){if("string"==typeof a&&(a=StyledElements.Utils.XML.parseFromString(a,"application/xml")),!(a instanceof Document))throw new TypeError("document is not a Document or cannot be parsed into a Document");return d(this,a.documentElement,b,c)},StyledElements.GUIBuilder=a}(),function(){"use strict";var a=new StyledElements.GUIBuilder,b='<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><div class="tooltip fade" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"><t:content/></div></div></s:styledgui>',c=function(a,b){switch(this.element.classList.remove("top","right","bottom","left"),b){case"top":this.element.classList.add("top"),this.element.style.left=a.left+(a.width-this.element.offsetWidth)/2+"px",this.element.style.top=a.top-this.element.offsetHeight+"px";break;case"right":this.element.classList.add("right"),this.element.style.left=a.right+"px",this.element.style.top=a.top+(a.height-this.element.offsetHeight)/2+"px";break;case"bottom":this.element.classList.add("bottom"),this.element.style.left=a.left+(a.width-this.element.offsetWidth)/2+"px",this.element.style.top=a.bottom+"px";break;case"left":this.element.classList.add("left"),this.element.style.left=a.left-this.element.offsetWidth+"px",this.element.style.top=a.top+(a.height-this.element.offsetHeight)/2+"px"}},d=function(){var a=this.element.parentElement.getBoundingClientRect(),b=this.element.getBoundingClientRect(),c=b.width-Math.max(b.right-a.right,0)-Math.max(a.left-b.left,0),d=b.height-Math.max(b.bottom-a.bottom,0)-Math.max(a.top-b.top,0),e=b.width*b.height,f=c*d;return e-f},e=function(a,b,d){var e=Math.min.apply(Math,b),f=b.indexOf(e),g=d[f];c.call(this,a,g);var h=this.element.parentElement.getBoundingClientRect(),i=this.element.getBoundingClientRect();i.bottom>h.bottom&&(this.element.style.top="",this.element.style.bottom="10px",i=this.element.getBoundingClientRect()),i.top<h.top&&(this.element.style.top="10px")},f=function(a,b){var f=0,g=[];do c.call(this,a,b[f]),g.push(d.call(this)),f+=1;while(g[f-1]>0&&f<b.length);g[f-1]>0&&e.call(this,a,g,b)},g=function(c){return Wirecloud.UserInterfaceManager._registerPopup(this),this.visible?void this.repaint():("getBoundingClientRect"in c&&(c=c.getBoundingClientRect()),this.element=a.parse(b,{content:this.options.content}).elements[0],document.body.appendChild(this.element),f.call(this,c,this.options.placement),void this.element.classList.add("in"))},h=function(a){var b={content:"","class":"",placement:["right","bottom","left","top"]};Object.defineProperty(this,"options",{value:StyledElements.Utils.merge(b,a)}),StyledElements.StyledElement.call(this,[]),Object.defineProperties(this,{visible:{get:function(){return null!=this.element}},_show:{value:g.bind(this),enumerable:!1}})};h.prototype=new StyledElements.StyledElement,h.prototype.bind=function(a){a.addEventListener("focus",this.show.bind(this,a),!1),a.addEventListener("blur",this.hide.bind(this),!1),a.addEventListener("mouseenter",this.show.bind(this,a),!1),a.addEventListener("mouseleave",this.hide.bind(this),!1),a.addEventListener("click",this.hide.bind(this),!1)},h.prototype.toggle=function(a){this.visible?this.hide():this._show(a)},h.prototype.show=function(a){this._show(a)};var i=function(){null!=this.element&&(document.body.removeChild(this.element),this.element=null,Wirecloud.UserInterfaceManager._unregisterPopup(this))};h.prototype.hide=function(){this.visible&&(this.element.classList.contains("in")?(this.element.addEventListener("transitionend",i.bind(this)),this.element.classList.remove("in")):i.call(this))},StyledElements.Tooltip=h}(),function(a,b){"use strict";var c=function(a){(null==this.inputElement||a.target!==this.inputElement)&&(a.preventDefault(),a.stopPropagation(),this.enabled&&(null!=this.inputElement&&this.inputElement.click(),this.events.click.trigger(this)))},d=function(a){a.preventDefault(),a.stopPropagation(),this.enabled&&this.events.dblclick.dispatch(this)},e=function(a){this.enabled&&13===a.keyCode&&(null!=this.inputElement&&this.inputElement.click(),this._clickCallback(a))},f=function(){this.events.mouseenter.dispatch(this)},g=function(){this.events.mouseleave.dispatch(this)},h=function(){this.events.focus.dispatch(this)},i=function(){this.events.blur.dispatch(this)},j=function(){this.enabled?this.wrapperElement.setAttribute("tabindex",this.tabindex):this.wrapperElement.setAttribute("tabindex",-1)},k=function(a){if(a=b.merge(b.clone(l),a),!a.extending){if(this.superClass(m),a.usedInForm?(this.wrapperElement=document.createElement("button"),this.wrapperElement.setAttribute("type","button")):this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-btn",a.state&&this.addClassName("btn-"+a.state),this.addClassName(a["class"]),this.addClassName(a.extraClass),""!==a.id.trim()&&this.wrapperElement.setAttribute("id",a.id),a.plain&&this.addClassName("plain"),null!=a.icon&&(this.icon=document.createElement("img"),this.icon.className="icon",this.icon.style.width=a.iconWidth+"px",this.icon.style.height=a.iconHeight+"px",this.icon.src=a.icon,this.wrapperElement.appendChild(this.icon)),null!=a.iconClass&&""!==a.iconClass.trim()){this.icon=document.createElement("i"),this.icon.classList.add("se-icon");for(var k=a.iconClass.trim().split(/\s+/),n=0;n<k.length;n++)this.icon.classList.add(k[n]);this.icon.classList.add(a.iconClass),this.wrapperElement.appendChild(this.icon)}a.text&&this.setLabel(a.text),a.iconClass&&a.stackedIconClass&&(this.stackedIcon=document.createElement("span"),this.stackedIcon.className=[a.stackedIconClass,"se-stacked-icon",a.stackedIconPlacement].join(" "),this.icon.appendChild(this.stackedIcon)),a.title&&this.setTitle(a.title);var o;Object.defineProperties(this,{tabindex:{get:function(){return o},set:function(a){o=a,j.call(this)}},visible:{get:function(){return!this.hasClassName("invisible")},set:function(a){this.toggleClassName("invisible",!a)._onvisible(a)}}}),this.tabindex=a.tabindex;var p=Object.getPrototypeOf(this);"function"==typeof p._clickCallback?this._clickCallback=p._clickCallback.bind(this):this._clickCallback=c.bind(this),this._keydownCallback=e.bind(this),this.wrapperElement.addEventListener("touchstart",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._clickCallback,!1),this.wrapperElement.addEventListener("dblclick",d.bind(this),!0),this.wrapperElement.addEventListener("keydown",this._keydownCallback,!1),this.wrapperElement.addEventListener("focus",h.bind(this),!0),this.wrapperElement.addEventListener("blur",i.bind(this),!0),this.wrapperElement.addEventListener("mouseenter",f.bind(this),!1),this.wrapperElement.addEventListener("mouseleave",g.bind(this),!1)}};StyledElements.Utils.inherit(k,StyledElements.StyledElement),k.prototype.Tooltip=StyledElements.Tooltip,k.prototype._onenabled=function(a){return j.call(this),a||this.blur(),this},k.prototype._onvisible=function(a){},k.prototype.focus=function(){this.wrapperElement.focus()},k.prototype.blur=function(){this.wrapperElement.blur()},k.prototype.setLabel=function(a){return a?o.call(this,a):n.call(this)},k.prototype.clearClassName=function(){return this.wrapperElement.className="se-btn",this},k.prototype.addIconClassName=function(a){return this.icon.classList.add(a),this},k.prototype.removeIconClassName=function(a){return this.icon.classList.remove(a),this},k.prototype.replaceIconClass=function(a,b){return this.icon.classList.remove(a),this.icon.classList.add(b),this},k.prototype.setTitle=function(a){return null==a||""===a?null!=this.tooltip&&(this.tooltip.destroy(),this.tooltip=null):(null==this.tooltip&&(this.tooltip=new this.Tooltip({content:a,placement:["bottom","top","right","left"]}),this.tooltip.bind(this)),this.tooltip.options.content=a),this},k.prototype.click=function(){this.enabled&&this.events.click.dispatch(this)},k.prototype.destroy=function(){this.wrapperElement.removeEventListener("touchstart",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._clickCallback,!0),this.wrapperElement.removeEventListener("keydown",this._keydownCallback,!1),delete this._clickCallback,delete this._keydownCallback,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Button=k;var l={id:"","class":"",extraClass:"",iconClass:"",stackedIconClass:"",state:"",plain:!1,usedInForm:!1,text:"",title:"",iconHeight:24,iconWidth:24,icon:null,stackedIconPlacement:"bottom-right",tabindex:0},m=["blur","click","dblclick","focus","mouseenter","mouseleave"],n=function(){return null!=this.label&&(this.remove(this.label),delete this.label),this},o=function(a){return null==this.label&&(this.label=document.createElement("span"),this.wrapperElement.appendChild(this.label)),this.label.textContent=a,this}}(StyledElements,StyledElements.Utils),function(){"use strict";var a,b;b=function(){this.inputElement.files&&(this.events.fileselect.dispatch(this,this.inputElement.files),this.inputElement.value="")},a=function(a){var c={multiple:!0};a=StyledElements.Utils.merge(c,a),StyledElements.Button.call(this,a),Object.defineProperty(this,"inputElement",{value:document.createElement("input")}),this.inputElement.setAttribute("type","file"),this.inputElement.setAttribute("tabindex","-1"),this.inputElement.multiple=a.multiple,this.wrapperElement.appendChild(this.inputElement),this.events.fileselect=new StyledElements.Event,this._onchange=b.bind(this),this.inputElement.addEventListener("change",this._onchange,!0)},a.prototype=new StyledElements.Button({extending:!0}),a.prototype.destroy=function(){this.inputElement.removeEventListener("change",this._onchange,!0),delete this._onchange,StyledElements.Button.prototype.destroy.call(this)},StyledElements.FileButton=a}(),function(a,b){"use strict";var c=["left-bottom","right-bottom","top-left","top-right","bottom-right","bottom-left"];Object.freeze(c);var d=["bottom-left","bottom-right","top-left","top-right"];Object.freeze(d);var e=function(a,b){var d=0;for(d=0;d<c.length;d++)this.wrapperElement.classList.remove("se-popup-menu-"+c[d]);switch(this.wrapperElement.classList.add("se-popup-menu-"+b),b){case"left-bottom":this.wrapperElement.style.left=a.left-this.wrapperElement.offsetWidth+1+"px",this.wrapperElement.style.top=a.top-1+"px";break;case"right-bottom":this.wrapperElement.style.left=a.right-1+"px",this.wrapperElement.style.top=a.top-1+"px";break;case"top-left":this.wrapperElement.style.top=a.top-this.wrapperElement.offsetHeight+1+"px",this.wrapperElement.style.left=a.left+"px";break;case"top-right":this.wrapperElement.style.top=a.top-this.wrapperElement.offsetHeight+1+"px",this.wrapperElement.style.left=a.right-this.wrapperElement.offsetWidth+"px";break;case"bottom-right":this.wrapperElement.style.top=a.bottom-1+"px",this.wrapperElement.style.left=a.right-this.wrapperElement.offsetWidth+"px";break;default:case"bottom-left":this.wrapperElement.style.top=a.bottom-1+"px",this.wrapperElement.style.left=a.left+"px"}},f=function(){var a=this.wrapperElement.parentElement.getBoundingClientRect(),b=this.wrapperElement.getBoundingClientRect(),c=b.width-Math.max(b.right-a.right,0)-Math.max(a.left-b.left,0),d=b.height-Math.max(b.bottom-a.bottom,0)-Math.max(a.top-b.top,0),e=b.width*b.height,f=c*d;return e-f},g=function(a,b,c){var d=Math.min.apply(Math,b),f=b.indexOf(d),g=c[f];e.call(this,a,g);var h=this.wrapperElement.parentElement.getBoundingClientRect(),i=this.wrapperElement.getBoundingClientRect();i.bottom>h.bottom&&(this.wrapperElement.style.top="",this.wrapperElement.style.bottom="10px",i=this.wrapperElement.getBoundingClientRect()),i.top<h.top&&(this.wrapperElement.style.top="10px")},h=function(a){var b={placement:null};a=StyledElements.Utils.merge(b,a),a.extending||(StyledElements.ObjectWithEvents.call(this,["itemOver","visibilityChange"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-popup-menu hidden",this._context=null,"position"in a?Array.isArray(a.position)?this._placement=a.position:"string"==typeof a.position?this._placement=[a.placement]:this._placement=d:Array.isArray(a.placement)?this._placement=a.placement:"string"==typeof a.placement?this._placement=[a.placement]:this._placement=d,Object.defineProperties(this,{hidden:{get:i}}),this._items=[],this._dynamicItems=[],this._submenus=[],this._menuItemCallback=this._menuItemCallback.bind(this),this._menuItemEnterCallback=this._menuItemEnterCallback.bind(this))};h.prototype=new StyledElements.ObjectWithEvents,h.prototype._append=function(a,b){if(a instanceof StyledElements.MenuItem)a.addEventListener("click",this._menuItemCallback),a.addEventListener("mouseover",this._menuItemEnterCallback);else if(a instanceof StyledElements.SubMenuItem)a.addEventListener("click",this._menuItemCallback),a.addEventListener("mouseover",this._menuItemEnterCallback),a._setParentPopupMenu(this);else if(!(a instanceof StyledElements.DynamicMenuItems||a instanceof StyledElements.Separator))throw null!=a?new TypeError("Invalid chlid element"):new TypeError("The new child element is null");b.push(a)},h.prototype.append=function(a){this._append(a,this._items)},h.prototype.appendSeparator=function(){this.append(new StyledElements.Separator)},h.prototype.clear=function(){return this.hidden||j.call(this),this._items=[],this},h.prototype.setContext=function(a){this._context=a},h.prototype._menuItemCallback=function(a){a.wrapperElement.classList.contains("submenu")?(this.show(),a.wrapperElement.classList.add("hovered")):this.hide(),"function"==typeof a.run&&a.run(this._context,a.context)},h.prototype.isVisible=function(){return!this.hidden},h.prototype.show=function(a){var b,c,d,h,i;if(!this.isVisible()){for(b=0;b<this._items.length;b+=1)if(d=this._items[b],d instanceof StyledElements.DynamicMenuItems)for(h=d.build(this._context),c=0;c<h.length;c+=1)i=h[c],this._append(i,this._dynamicItems),i instanceof StyledElements.MenuItem||i instanceof StyledElements.Separator?i.insertInto(this.wrapperElement):i instanceof StyledElements.SubMenuItem&&i._getMenuItem().insertInto(this.wrapperElement);else d instanceof StyledElements.MenuItem||d instanceof StyledElements.Separator?d.insertInto(this.wrapperElement):d instanceof StyledElements.SubMenuItem?(d._getMenuItem().insertInto(this.wrapperElement),this._submenus.push(d)):this.wrapperElement.appendChild(d);this.wrapperElement.classList.remove("hidden");try{window.parent.document.body.appendChild(this.wrapperElement)}catch(j){document.body.appendChild(this.wrapperElement)}if(Wirecloud.UserInterfaceManager._registerPopup(this),this.events.visibilityChange.dispatch(this),!("left"in a)&&"x"in a&&"y"in a)this.wrapperElement.style.top=a.y+"px",this.wrapperElement.style.left=a.x+"px";else{b=0;var k=[];do e.call(this,a,this._placement[b]),k.push(f.call(this)),b+=1;while(k[b-1]>0&&b<this._placement.length);k[b-1]>0&&g.call(this,a,k,this._placement)}this.wrapperElement.style.display="block"}},h.prototype.hide=function(){return this.hidden?this:(this.wrapperElement.classList.add("hidden"),this.wrapperElement.style.bottom="",j.call(this),b.removeFromParent(this.wrapperElement),Wirecloud.UserInterfaceManager._unregisterPopup(this),this.trigger("visibilityChange"))},h.prototype._menuItemEnterCallback=function(a){this.events.itemOver.dispatch(this,a)},h.prototype.destroy=function(){var a,b;for(this.hide(),a=0;a<this._items.length;a+=1)b=this._items[a],b instanceof StyledElements.MenuItem&&b.destroy();this._items=null,this._menuItemCallback=null,this._context=null,StyledElements.StyledElement.prototype.destroy.call(this)};var i=function(){return!b.XML.isElement(this.wrapperElement.parentNode)},j=function(){var b,c;for(b=this._submenus.length-1;b>=0;b--)this._submenus[b].hide(),this._submenus.splice(b,1);for(b=this._dynamicItems.length-1;b>=0;b--)c=this._dynamicItems[b],c instanceof a.SubMenuItem&&c.hide(),c.destroy(),this._dynamicItems.splice(b,1);this.wrapperElement.innerHTML=""};StyledElements.PopupMenuBase=h}(StyledElements,StyledElements.Utils),function(){"use strict";var a=function(a){if(0===a.button){var b=this.wrapperElement.getBoundingClientRect();(a.clientX<b.left||a.clientX>b.right||a.clientY<b.top||a.clientY>b.bottom)&&setTimeout(this.hide.bind(this),0)}},b=function(b){StyledElements.PopupMenuBase.call(this,b),this._disableCallback=a.bind(this)};b.prototype=new StyledElements.PopupMenuBase({extending:!0}),b.prototype.show=function(a){document.addEventListener("click",this._disableCallback,!0),StyledElements.PopupMenuBase.prototype.show.call(this,a)},b.prototype.hide=function(){StyledElements.PopupMenuBase.prototype.hide.call(this),document.removeEventListener("click",this._disableCallback,!0),document.removeEventListener("contextmenu",this._disableCallback,!0)},b.prototype.destroy=function(){this._disableCallback=null,StyledElements.PopupMenuBase.prototype.destroy.call(this)},StyledElements.PopupMenu=b}(),function(){"use strict";StyledElements.DynamicMenuItems=function(){},StyledElements.DynamicMenuItems.prototype.build=function(){return[]}}(),function(){"use strict";var a=function(a,b,c){StyledElements.StyledElement.call(this,["click","mouseover","mouseout"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.classList.add("se-popup-menu-item");var d=document.createElement("span");d.appendChild(document.createTextNode(a)),this.wrapperElement.appendChild(d),this.run=b,this.context=c,this.icon=null,this._mouseoverEventHandler=function(a){this.enabled&&(this.wrapperElement.classList.add("hovered"),this.events.mouseover.dispatch(this))}.bind(this),this.wrapperElement.addEventListener("mouseover",this._mouseoverEventHandler,!1),this._mouseoutEventHandler=function(a){this.enabled&&(this.wrapperElement.classList.remove("hovered"),this.events.mouseout.dispatch(this))}.bind(this),this.wrapperElement.addEventListener("mouseout",this._mouseoutEventHandler,!1),this._clickHandler=function(a){a.stopPropagation(),this.enabled&&(this.wrapperElement.classList.remove("hovered"),this.events.mouseout.dispatch(this),this.events.click.dispatch(this))}.bind(this),this.wrapperElement.addEventListener("click",this._clickHandler,!0)};a.prototype=new StyledElements.StyledElement,a.prototype.addIconClass=function(a){return null===this.icon&&(this.icon=document.createElement("span"),this.wrapperElement.insertBefore(this.icon,this.wrapperElement.firstChild)),this.icon.className="se-icon "+a,this},a.prototype.destroy=function(){StyledElements.Utils.XML.isElement(this.wrapperElement.parentNode)&&StyledElements.Utils.removeFromParent(this.wrapperElement),this.wrapperElement.removeEventListener("mouseover",this._mouseoverEventHandler,!1),this.wrapperElement.removeEventListener("mouseout",this._mouseoutEventHandler,!1),this.wrapperElement.removeEventListener("click",this._clickHandler,!0),this._mouseoverEventHandler=null,this._mouseoutEventHandler=null,this._clickHandler=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.MenuItem=a}(),function(){"use strict";var a=function(){StyledElements.StyledElement.call(this,[]),this.wrapperElement=document.createElement("hr")};a.prototype=new StyledElements.StyledElement,a.prototype.destroy=function(){StyledElements.Utils.XML.isElement(this.wrapperElement.parentNode)&&StyledElements.Utils.removeFromParent(this.wrapperElement),StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Separator=a}(),function(){"use strict";var a=function(a,b,c){return 0===arguments.length?!0:(c=StyledElements.Utils.merge({position:["right-bottom","left-bottom"]},c),StyledElements.PopupMenuBase.call(this,c),this.wrapperElement.classList.add("se-popup-submenu"),this.menuItem=new StyledElements.MenuItem(a,b),void this.menuItem.addClassName("submenu"))};a.prototype=new StyledElements.PopupMenuBase({extending:!0}),a.prototype._getContext=function(){return this.parentMenu instanceof a?this.parentMenu._getContext():this.parentMenu._context},a.prototype._menuItemCallback=function(a){for(var b=this;b.parentMenu;)b=b.parentMenu;b.hide(),a.run(b._context)},a.prototype._setParentPopupMenu=function(a){this.parentMenu=a,this.parentMenu.addEventListener("itemOver",function(a,b){b===this.menuItem?this.show(this.menuItem.wrapperElement.getBoundingClientRect()):this.hide()}.bind(this))},a.prototype._getMenuItem=function(){return this.menuItem},a.prototype.addEventListener=function(a,b){switch(a){case"mouseover":case"click":return this.menuItem.addEventListener(a,b);default:return StyledElements.PopupMenuBase.prototype.addEventListener.call(this,a,b)}},a.prototype.enable=function(){this.menuItem.enable()},a.prototype.disable=function(){this.menuItem.disable()},a.prototype.setDisabled=function(a){this.menuItem.setDisabled(a)},a.prototype.destroy=function(){this.menuItem&&this.menuItem.destroy(),this.menuItem=null,StyledElements.PopupMenuBase.prototype.destroy.call(this)},StyledElements.SubMenuItem=a}(),function(){"use strict";var a=function(){this.popup_menu.isVisible()?this.wrapperElement.classList.add("open"):this.wrapperElement.classList.remove("open")},b=function(b){var c={menuOptions:null,menu:null};b=StyledElements.Utils.merge(c,b),b.extending||(StyledElements.Button.call(this,b),null!=b.menu?(this.popup_menu=b.menu,this._owned_popup_menu=!1):(this.popup_menu=new this.PopupMenu(b.menuOptions),this._owned_popup_menu=!0),this.addEventListener("click",function(){this.popup_menu.isVisible()?this.popup_menu.hide():this.popup_menu.show(this.getBoundingClientRect())}.bind(this)),this._visibilityChangeListener=a.bind(this),this.popup_menu.addEventListener("visibilityChange",this._visibilityChangeListener))};b.prototype=new StyledElements.Button({extending:!0}),b.prototype.PopupMenu=StyledElements.PopupMenu,b.prototype.getPopupMenu=function(){return this.popup_menu},b.prototype.replacePopupMenu=function(a){this._owned_popup_menu&&(this.popup_menu.destroy(),this._owned_popup_menu=!1),this.popup_menu=a},b.prototype.destroy=function(){StyledElements.Button.prototype.destroy.call(this),this._owned_popup_menu?this.popup_menu.destroy():this.popup_menu.removeEventListener("visibilityChange",this._visibilityChangeListener),this.popup_menu=null},StyledElements.PopupButton=b}(),function(){"use strict";var a=function(a,b){var c,d,e;for(c="string"==typeof b?[b]:b.slice(),d=a;null!==d&&c.length>0;)e=c.splice(0,1)[0],d=d[e];return null===d||c.length>0?"":d},b=function(b,c){return Object.getOwnPropertyNames(b).some(function(d,e,f){var g=a(b,d);switch(typeof g){case"number":return c.test(""+g);case"string":return c.test(g);default:return!1}})},c=function(a){return new RegExp(StyledElements.Utils.escapeRegExp(a),"i")},d=function(a){var d,e,f;if(!a)return void(this.filteredElements=this.elements);var g=c(a);for(d=[],e=0;e<this.elements.length;e+=1)f=this.elements[e],b.call(this,f,g)&&d.push(f);this.filteredElements=d},e=function(b){var c,d,e,f,g;if(null==b)return void(this.sortedElements=this.filteredElements);if(c=b[0],d=!1,"-"===c[0]&&(d=!0,c=c.substr(1)),e=this.sort_info[c],f=e.sortFunc,null==f)switch(e.type){case"date":g="function"==typeof e.dateparser?e.dateparser:function(a){return new Date(a)},f=function(b,c){b=a(b,this.field);try{b=g(b)}catch(d){b=new Date(0)}c=a(c,this.field);try{c=g(c)}catch(e){c=new Date(0)}return b-c}.bind({field:e.field});break;case"number":f=function(b,c){return b=a(b,this.field),b=null!==b?Number(b):0,c=a(c,this.field),c=null!==c?Number(c):0,b-c}.bind({field:e.field});break;default:f=function(b,c){return b=a(b,this.field),b=null!==b?b:"",c=a(c,this.field),c=null!==c?c:"",b.localeCompare(c)}.bind({field:e.field})}d&&(f=function(a,b){return-this(a,b)}.bind(f)),this.sortedElements=this.filteredElements.sort(f)},f=function(a,b,c,d){var e,f=a;if(a>this.totalPages&&(a=this.totalPages),a-=1,b.pageSize>0){var g=a*b.pageSize,h=g+b.pageSize;e=this.sortedElements.slice(g,h)}else e=this.sortedElements;c(e,{current_page:f,total_count:this.sortedElements.length})},g=function(a){"object"!=typeof a&&(a={}),a.requestFunc=f.bind(this),StyledElements.PaginatedSource.call(this,a),this.sort_info=a.sort_info,"object"!=typeof this.sort_info&&(this.sort_info={}),Array.isArray(a.initialElements)?this.changeElements(a.initialElements):(this.elements=[],this.filteredElements=[],this.sortedElements=[])};g.prototype=new StyledElements.PaginatedSource,g.prototype.changeOptions=function(a){var b=!1;"keywords"in a&&(d.call(this,a.keywords),b=!0),"order"in a?e.call(this,a.order):b&&e.call(this,this.pOptions.order),StyledElements.PaginatedSource.prototype.changeOptions.call(this,a)},g.prototype.changeElements=function(a){Array.isArray(a)?this.elements=a:this.elements=[],d.call(this,this.pOptions.keywords),e.call(this,this.pOptions.order),this.refresh()},g.prototype.addElement=function(a){if(this.elements.push(a),this.pOptions.keywords){var d=c(this.pOptions.keywords);b.call(this,a,d)&&(this.filteredElements.push(a),e.call(this,this.pOptions.order),this.refresh())}else this.filteredElements=this.elements,e.call(this,this.pOptions.order),this.refresh()},StyledElements.StaticPaginatedSource=g}(),function(){"use strict";var a,b,c,d,e;c=function(a){return a.target!==this.inputElement?(this.inputElement.click(),a.stopPropagation(),a.preventDefault(),!1):void 0},b=function(){var a,b;a=this.getValue(),b=null!=a?a.name:"",this.name_preview.textContent=b,this.name_preview.setAttribute("title",b),this.events.change.dispatch(this)},d=function(){this.wrapperElement.classList.add("focus"),this.events.focus.dispatch(this)},e=function(){this.wrapperElement.classList.remove("focus"),this.events.blur.dispatch(this)},a=function(a){var f={"class":""};a=StyledElements.Utils.merge(f,a),StyledElements.InputElement.call(this,a.initialValue,["change","focus","blur"]),this.layout=new StyledElements.HorizontalLayout({"class":"se-file-field input input-append"}),this.wrapperElement=this.layout.wrapperElement,""!==a["class"]&&(this.wrapperElement.className+=" "+a["class"]);var g=document.createElement("div");g.className="input_wrapper",this.wrapperElement.appendChild(g),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","file"),this.inputElement.setAttribute("tabindex",0),g.appendChild(this.inputElement),a.name&&this.inputElement.setAttribute("name",a.name),null!=a.id&&this.wrapperElement.setAttribute("id",a.id),this.name_preview=document.createElement("div"),this.name_preview.className="filename",this.layout.getCenterContainer().appendChild(this.name_preview);var h=document.createElement("div");h.className="se-btn";var i=document.createElement("span");i.textContent=StyledElements.Utils.gettext("Select"),h.appendChild(i),this.layout.getEastContainer().appendChild(h),this._onchange=b.bind(this),this._onclick=c.bind(this),this._onfocus=d.bind(this),this._onblur=e.bind(this),this.inputElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._onclick,!0),this.inputElement.addEventListener("change",this._onchange,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0)},a.prototype=new StyledElements.InputElement,a.prototype.repaint=function(){this.layout.repaint()},a.prototype.insertInto=function(a,b){StyledElements.InputElement.prototype.insertInto.call(this,a,b),this.repaint()},a.prototype.getValue=function(){return this.inputElement.files[0]},a.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._onclick,!0),this.inputElement.removeEventListener("change",this._onchange,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._onchange,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.StyledFileField=a}(),function(){"use strict";var a=function(a){var b=Number(this.inputElement.value);isNaN(b)?b=a>0&&this.options.min!==Number.NEGATIVE_INFINITY?this.options.min:0>a&&this.options.max!==Number.POSITIVE_INFINITY?this.options.max:0:(b=Math.round(100*(b+a))/100,b>this.options.max?b=this.options.max:b<this.options.min&&(b=this.options.min)),this.inputElement.value=b},b=function(){this.wrapperElement.classList.add("focus"),this.events.focus.dispatch(this)},c=function(){this.wrapperElement.classList.remove("focus"),this.events.blur.dispatch(this)},d=function(d){var e={initialValue:0,"class":"",min:Number.NEGATIVE_INFINITY,max:Number.POSITIVE_INFINITY,inc:1};this.options=d=StyledElements.Utils.merge(e,d),d.min=Number(d.min),d.max=Number(d.max),d.inc=Number(d.inc),d.initialValue=Number(d.initialValue),StyledElements.InputElement.call(this,d.initialValue,["change","focus","blur"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-numeric-field",this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","text"),null!=d.name&&this.inputElement.setAttribute("name",d.name),null!=d.id&&this.wrapperElement.setAttribute("id",d.id),this.inputElement.setAttribute("value",d.initialValue);var f=new StyledElements.Button({"class":"se-numeric-field-top-button",iconClass:"icon-caret-up"}),g=new StyledElements.Button({"class":"se-numeric-field-bottom-button",iconClass:"icon-caret-down"});f.addEventListener("click",a.bind(this,d.inc)),g.addEventListener("click",a.bind(this,-d.inc)),this.inputElement.addEventListener("focus",b.bind(this),!0),this.inputElement.addEventListener("blur",c.bind(this),!0),this.wrapperElement.appendChild(this.inputElement),f.insertInto(this.wrapperElement),g.insertInto(this.wrapperElement)};d.prototype=new StyledElements.InputElement,d.prototype.getValue=function(){return Number(this.inputElement.value)},StyledElements.NumericField=d}(),function(){"use strict";var a,b,c,d,e;b=function(){this.events.change.dispatch(this)},c=function(){this.events.focus.dispatch(this)},d=function(){this.events.blur.dispatch(this)},e=function(a){13===a.keyCode&&this.events.submit.dispatch(this)},a=function(a){var f={initialValue:"","class":"",placeholder:null};a=StyledElements.Utils.merge(f,a),StyledElements.InputElement.call(this,a.initialValue,["change","focus","blur","submit"]),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","text"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-text-field",""!==a["class"]&&(this.wrapperElement.className+=" "+a["class"]),a.name&&this.inputElement.setAttribute("name",a.name),null!=a.placeholder&&this.setPlaceholder(a.placeholder),null!=a.id&&this.wrapperElement.setAttribute("id",a.id),this.inputElement.setAttribute("value",a.initialValue),this._oninput=b.bind(this),this._onfocus=c.bind(this),this._onblur=d.bind(this),this._onkeypress=e.bind(this),this.inputElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keypress",this._onkeypress,!0);
},a.prototype=new StyledElements.InputElement,a.prototype.setPlaceholder=function(a){this.inputElement.setAttribute("placeholder",a)},a.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.removeEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keypress",this._onkeypress,!0),delete this._oninput,delete this._onfocus,delete this._onblur,delete this._onkeypress,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.TextField=a}(),function(){"use strict";var a,b,c,d;b=function(){this.events.change.dispatch(this)},c=function(){this.events.focus.dispatch(this)},d=function(){this.events.blur.dispatch(this)},a=function(a){var e={initialValue:"","class":""};a=StyledElements.Utils.merge(e,a),StyledElements.InputElement.call(this,a.initialValue,["blur","change","focus"]),this.inputElement=document.createElement("textarea"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-text-area",""!==a["class"]&&(this.wrapperElement.className+=" "+a["class"]),a.name&&this.inputElement.setAttribute("name",a.name),null!=a.id&&this.wrapperElement.setAttribute("id",a.id),this.setValue(a.initialValue),this._oninput=b.bind(this),this._onfocus=c.bind(this),this._onblur=d.bind(this),this.inputElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0)},a.prototype=new StyledElements.InputElement,a.prototype.select=function(){this.inputElement.select()},a.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.removeEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._oninput,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.TextArea=a}(),function(){"use strict";var a=function(){this.listComponent.enabled&&this.listComponent.toggleElementSelection(this.value)},b=function(){for(var a=0;a<this.currentSelection.length;a++){var b=this.currentSelection[a];this.entriesByValue[b].element.classList.remove("selected")}this.currentSelection=[]},c=function(a){a=StyledElements.Utils.merge({"class":"",id:null,multivalued:!1,initialEntries:[],initialSelection:[]},a),StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.prependWord(a["class"],"styled_list"),null!=a.id&&(this.wrapperElement.id=a.id),this.content=document.createElement("div"),this.wrapperElement.appendChild(this.content),this.entries=[],this.entriesByValue={},this.currentSelection=[],this.addEntries(a.initialEntries),this.select(a.initialSelection),a.full&&this.wrapperElement.classList.add("full"),this.multivalued=a.multivalued,void 0===a.allowEmpty?this.allowEmpty=this.multivalued:this.allowEmpty=a.allowEmpty};c.prototype=new StyledElements.StyledElement,c.prototype.addEntries=function(b){var c,d;if(null!=b&&0!==b.length){if(!Array.isArray(b))throw new TypeError;for(var e=0;e<b.length;e++){var f=b[e];Array.isArray(f)?(c=f[0],d=f[1]):(c=b[e].value,d=b[e].label),d=d?d:c;var g=document.createElement("div");g.className="row";var h={listComponent:this,value:c};g.addEventListener("click",a.bind(h),!0),f.element=g,g.appendChild(document.createTextNode(d)),this.content.appendChild(g),this.entriesByValue[c]=f}this.entries=this.entries.concat(b)}},c.prototype.removeEntryByValue=function(a){var b,c;b=this.entriesByValue[a],delete this.entriesByValue[a],this.entries.slice(this.entries.indexOf(b),1),StyledElements.Utils.removeFromParent(b.element),-1!==c&&(this.currentSelection.splice(c,1),this.event.change.dispatch(this,this.currentSelection,[],[a]))},c.prototype.clear=function(){this.cleanSelection(),this.content.innerHTML="",this.entries=[],this.entriesByValue={}},c.prototype.getSelection=function(){return StyledElements.Utils.clone(this.currentSelection)},c.prototype.cleanSelection=function(){if(0!==this.currentSelection.length){var a=this.currentSelection;b.call(this),this.events.change.dispatch(this,[],[],a)}},c.prototype.select=function(a){b.call(this),this.addSelection(a)},c.prototype.addSelection=function(a){var c,d,e=[],f=[];if(0!==a.length){if(!this.multivalued){if(a[0]===this.currentSelection[0])return;f=this.currentSelection,b.call(this),a.length>1&&(a=a.splice(0,1))}for(c=0;c<a.length;c++)d=a[c],-1===this.currentSelection.indexOf(d)&&(this.entriesByValue[d].element.classList.add("selected"),this.currentSelection.push(d),e.push(d));this.events.change.dispatch(this,this.currentSelection,e,f)}},c.prototype.removeSelection=function(a){var b,c,d,e=[];if(0!==a.length){for(b=0;b<a.length;b++)c=a[b],this.entriesByValue[c].element.classList.remove("selected"),d=this.currentSelection.indexOf(c),-1!==d&&(this.currentSelection.splice(d,1),this.entriesByValue[c].element.classList.remove("selected"),e.push(c));e.length>0&&this.events.change.dispatch(this,this.currentSelection,[],e)}},c.prototype.toggleElementSelection=function(a){this.entriesByValue[a].element.classList.contains("selected")?this.allowEmpty&&this.removeSelection([a]):this.addSelection([a])},StyledElements.List=c}(),function(){"use strict";var a,b,c,d;b=function(){this.events.change.dispatch(this)},c=function(){this.events.focus.dispatch(this)},d=function(){this.events.blur.dispatch(this)},a=function(a){var e={initialValue:"","class":""};a=StyledElements.Utils.merge(e,a),StyledElements.InputElement.call(this,a.initialValue,["change","focus","blur"]),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","password"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-password-field",""!==a["class"]&&(this.wrapperElement.className+=" "+a["class"]),"name"in a&&this.inputElement.setAttribute("name",a.name),"id"in a&&this.wrapperElement.setAttribute("id",a.id),this.inputElement.setAttribute("value",a.initialValue),this._oninput=b.bind(this),this._onfocus=c.bind(this),this._onblur=d.bind(this),this.inputElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0)},a.prototype=new StyledElements.InputElement,a.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.removeEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.PasswordField=a}(),function(){"use strict";var a,b,c,d;b=function(a){if(this.enabled){var b=a.target;this.textDiv.textContent=b[b.selectedIndex].text,this.events.change.dispatch(this)}},c=function(){this.wrapperElement.classList.add("focus"),this.events.focus.dispatch(this)},d=function(){this.wrapperElement.classList.remove("focus"),this.events.blur.dispatch(this)},a=function(a){a=StyledElements.Utils.merge({"class":"",initialEntries:[],initialValue:null,idFunc:function(a){return null==a?"":a.toString()}},a),StyledElements.InputElement.call(this,a.initialValue,["change","focus","blur"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.prependWord(a["class"],"se-select");var e=document.createElement("div");e.className="se-select-arrow",this.inputElement=document.createElement("select"),a.name&&this.inputElement.setAttribute("name",a.name),a.id&&this.wrapperElement.setAttribute("id",a.id),this.textDiv=document.createElement("div"),this.textDiv.className="se-select-text",this.wrapperElement.appendChild(this.textDiv),this.wrapperElement.appendChild(e),this.wrapperElement.appendChild(this.inputElement),this.optionsByValue={},this.optionValues={},this.idFunc=a.idFunc,this.addEntries(a.initialEntries),this._onchange=b.bind(this),this._onfocus=c.bind(this),this._onblur=d.bind(this),this.inputElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("change",this._onchange,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0);var f=this.inputElement.options.selectedIndex;-1!==f&&(this.textDiv.textContent=this.inputElement.options[f].text)},a.prototype=new StyledElements.InputElement,a.prototype.getLabel=function(){return this.textDiv.textContent},a.prototype.getValue=function(){return this.optionValues[this.inputElement.value]},a.prototype.setValue=function(a){if("string"!=typeof a)try{a=this.idFunc(a)}catch(b){a=null}if(null===a||!(a in this.optionValues))if(null!=this.defaultValue)a=this.defaultValue;else{if(!(this.inputElement.options.length>0))return StyledElements.InputElement.prototype.setValue.call(this,""),void(this.textDiv.textContent="");a=this.inputElement.options[0].value}StyledElements.InputElement.prototype.setValue.call(this,a),this.textDiv.textContent=this.optionsByValue[a]},a.prototype.addEntries=function(a){var b,c,d,e;if(b=this.inputElement.options.selectedIndex,null!=a&&0!==a.length){for(var f=0;f<a.length;f++){e=a[f];var g=document.createElement("option");"value"in e?(c=e.value,d=e.label):Array.isArray(e)?(c=e[0],d=e[1]):(c=e,d=e),d=d?d:c;var h=c;"string"!=typeof c&&(c=this.idFunc(c)),g.setAttribute("value",c),g.appendChild(document.createTextNode(d)),this.defaultValue==c&&g.setAttribute("selected","selected"),this.inputElement.appendChild(g),this.optionValues[c]=h,this.optionsByValue[c]=d}var i=this.inputElement.options.selectedIndex;b!==i&&(this.textDiv.textContent=this.inputElement.options[i].text)}},a.prototype.clear=function(){this.textDiv.textContent="",this.inputElement.textContent="",this.optionsByValue={},this.optionsValues={}},a.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.removeEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.removeEventListener("change",this._onchange,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._onchange,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.Select=a}(),function(){"use strict";StyledElements.ToggleButton=function(a){var b={initiallyChecked:!1};a=StyledElements.Utils.merge(b,a),a.extending||(StyledElements.Button.call(this,a),null==a.checkedIcon&&(a.checkedIcon=a.icon),null==a.checkedText&&(a.checkedText=a.text),this._icon=a.icon,this._checkedIcon=a.checkedIcon,this._text=a.text,this._checkedText=a.checkedText,Object.defineProperty(this,"active",{get:function(){return this.hasClassName("active")},set:function(a){this.toggleClassName("active",a)._onactive(a)}}),this.active=a.initiallyChecked)},StyledElements.ToggleButton.prototype=new StyledElements.Button({extending:!0}),StyledElements.ToggleButton.prototype._onactive=function(a){return this.active!==a&&(this.icon&&(this.icon.src=a?this._checkedIcon:this._icon),this.label&&(this.label.textContent=a?this._checkedText:this._text)),this},StyledElements.ToggleButton.prototype._clickCallback=function(a){this.enabled&&(a.stopPropagation(),this.active=!this.active,this.events.click.trigger(this))}}(),function(){"use strict";var a=function(a,b){b.preventDefault(),b.stopPropagation(),this.switchPill(a)},b=function(a){var b={"class":""};a=StyledElements.Utils.merge(b,a),StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("ul"),this.wrapperElement.className=StyledElements.Utils.appendWord(a["class"],"se-pills"),this.activePill=null,this.pills={}};b.prototype=new StyledElements.Container,b.prototype.add=function(b,c){var d=document.createElement("li");d.className="se-pill",d.textContent=c,d.addEventListener("click",a.bind(this,b),!0),this.wrapperElement.appendChild(d),this.pills[b]=d},b.prototype.switchPill=function(a){if(!(a in this.pills))throw new TypeError("Invalid pill id");a!=this.activePill&&(null!=this.activePill&&this.pills[this.activePill].classList.remove("active"),this.activePill=a,this.pills[this.activePill].classList.add("active"),this.events.change.dispatch(this,a))},StyledElements.Pills=b}(),function(){"use strict";var a=function(a,b,c){if(0!==arguments.length){if(!(b instanceof StyledElements.Notebook))throw new Error("Invalid notebook argument");var d={closable:!0,containerOptions:{},name:""};if(c=StyledElements.Utils.merge(d,c),c.closeable&&(c.closable=c.closeable),c.useFullHeight=!0,Object.defineProperties(this,{notebook:{value:b},tabId:{value:a}}),this.tabElement=document.createElement("li"),this.tabElement.className="se-notebook-tab",this.name=document.createElement("span"),this.tabElement.appendChild(this.name),StyledElements.Container.call(this,c.containerOptions,["show","hide","close"]),this.wrapperElement.classList.add("se-notebook-tab-content"),this.wrapperElement.classList.add("hidden"),this.tabElement.addEventListener("click",function(){this.notebook.goToTab(this.tabId)}.bind(this),!1),c.closable){var e=new this.Button({iconClass:"icon-remove",plain:!0,"class":"close_button"});e.insertInto(this.tabElement),e.addEventListener("click",this.close.bind(this),!1)}this.rename(c.name),this.setTitle(c.title)}};a.prototype=new StyledElements.Container({extending:!0}),a.prototype.Tooltip=StyledElements.Tooltip,a.prototype.Button=StyledElements.Button,a.prototype.close=function(){this.notebook.removeTab(this.tabId)},a.prototype.rename=function(a){this.nameText=a,this.name.textContent=this.nameText},a.prototype.setTitle=function(a){null==a||""===a?null!=this.tooltip&&(this.tooltip.destroy(),this.tooltip=null):(null==this.tooltip&&(this.tooltip=new this.Tooltip({content:a,placement:["bottom","top","right","left"]}),this.tooltip.bind(this.tabElement)),this.tooltip.options.content=a)},a.prototype.setIcon=function(a){return null==a?void(null!=this.tabIcon&&(StyledElements.Utils.removeFromParent(this.tabIcon),this.tabIcon=null)):(null==this.tabIcon&&(this.tabIcon=document.createElement("img"),this.tabElement.insertBefore(this.tabIcon,this.tabElement.firstChild)),void(this.tabIcon.src=a))},a.prototype.setVisible=function(a){a?(this.tabElement.classList.add("selected"),this.wrapperElement.classList.remove("hidden"),this.repaint(!1),this.events.show.dispatch(this)):(this.tabElement.classList.remove("selected"),this.wrapperElement.classList.add("hidden"),this.events.hide.dispatch(this))},a.prototype.getId=function(){return this.tabId},a.prototype.getTabElement=function(){return this.tabElement},StyledElements.Tab=a}(),function(){"use strict";var a=function(){this.events.newTab.dispatch(this)},b=function(b){var g;StyledElements.StyledElement.call(this,["change","changed","tabDeletion","tabInsertion","newTab"]);var h={"class":"",focusOnSetVisible:!0,full:!0};b=StyledElements.Utils.merge(h,b),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.prependWord(b["class"],"se-notebook"),g=new StyledElements.HorizontalLayout({"class":"se-notebook-tabs-wrapper",autoHeight:!1}),this.tabWrapper=g,g.insertInto(this.wrapperElement),this.tabArea=new StyledElements.Container,g.getCenterContainer().appendChild(this.tabArea),this.tabArea.addClassName("se-notebook-tab-area"),this.moveLeftButton=new this.Button({"class":"move_left",iconClass:"icon-caret-left"}),g.getWestContainer().appendChild(this.moveLeftButton),this.moveRightButton=new this.Button({"class":"move_right",iconClass:"icon-caret-right"}),g.getEastContainer().appendChild(this.moveRightButton),this.contentArea=document.createElement("div"),this.contentArea.className="se-notebook-content-wrapper",this.wrapperElement.appendChild(this.contentArea),this.tabs=[],this.tabsById=[],this.visibleTab=null,this.maxTabElementWidth=null,null!=b.id&&this.wrapperElement.setAttribute("id",b.id),b.full&&this.wrapperElement.classList.add("full"),this.focusOnSetVisible=b.focusOnSetVisible,this.events.newTab.addEventListener=function(b){var c;null==this.new_tab_button_tabs&&(c=a.bind(this),this.new_tab_button_tabs=new this.Button({iconClass:"icon-plus","class":"se-notebook-new-tab",title:StyledElements.Utils.gettext("Add Tab")}),this.new_tab_button_tabs.addEventListener("click",c),this.tabArea.appendChild(this.new_tab_button_tabs),this.new_tab_button_left=new this.Button({iconClass:"icon-plus","class":"se-notebook-new-tab",title:StyledElements.Utils.gettext("Add Tab")}),this.new_tab_button_left.addEventListener("click",c),this.addButton(this.new_tab_button_left)),StyledElements.Event.prototype.addEventListener.call(this.events.newTab,b)}.bind(this);var i={control:this,initialScrollLeft:null,finalScrollLeft:null,steps:null,step:null,inc:null},j=function(a,b){var c=b.initialScrollLeft+Math.floor((a+1)*b.inc);return b.inc<0&&c>b.finalScrollLeft||b.inc>0&&c<b.finalScrollLeft?(b.control.tabArea.wrapperElement.scrollLeft=Math.round(c),!0):(b.control.tabArea.wrapperElement.scrollLeft=b.finalScrollLeft,e.call(b.control),!1)},k=function(a,b){var e,g,h,i,j,k,l;switch(a.initialScrollLeft=a.control.tabArea.wrapperElement.scrollLeft,k=document.defaultView.getComputedStyle(a.control.tabArea.wrapperElement,null),l=k.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX),b.type){case"shiftLeft":if(c.call(a.control,0))return!1;e=f.call(a.control),g=a.control.tabs[e-1].getTabElement(),a.finalScrollLeft=g.offsetLeft-l;break;case"shiftRight":if(d.call(a.control))return!1;e=f.call(a.control),g=a.control.tabs[e+1].getTabElement(),a.finalScrollLeft=g.offsetLeft-l;break;case"focus":if(g=a.control.tabsById[b.tabId].getTabElement(),c.call(a.control,a.control.getTabIndex(b.tabId),!0))return!1;a.finalScrollLeft=g.offsetLeft-l}h=a.control.tabArea.wrapperElement.scrollWidth-a.control.tabArea.wrapperElement.clientWidth,a.finalScrollLeft>h&&(a.finalScrollLeft=h),i=(new Date).getTime()+100,j=[],a.steps=6;for(var m=0;m<=a.steps;m++)j[m]=i+100*m;return a.inc=Math.floor((a.finalScrollLeft-a.initialScrollLeft)/a.steps),j};this.transitionsQueue=new StyledElements.CommandQueue(i,k,j),this.moveLeftButton.addEventListener("click",this.shiftLeftTabs.bind(this)),this.moveRightButton.addEventListener("click",this.shiftRightTabs.bind(this)),Object.defineProperty(this,"fullscreen",{get:function(){return"fullscreenElement"in document?document.fullscreenElement===this.wrapperElement:"msFullscreenElement"in document?document.msFullscreenElement===this.wrapperElement:"mozFullScreenElement"in document?document.mozFullScreenElement===this.wrapperElement:"webkitFullscreenElement"in document?document.webkitFullscreenElement===this.wrapperElement:void 0}})};b.prototype=new StyledElements.StyledElement,b.prototype.Button=StyledElements.Button,b.prototype.Tab=StyledElements.Tab;var c=function(a,b){var c,d,e,f;return c=this.tabs[a].getTabElement(),d=this.tabArea.wrapperElement.scrollLeft,e=d+this.tabArea.wrapperElement.clientWidth,b?(f=c.offsetLeft+c.offsetWidth,c.offsetLeft>=d&&e>=f):c.offsetLeft>=d&&c.offsetLeft<=e},d=function(){var a=this.tabs.length-1;return 0===this.tabs.length||c.call(this,a,!0)?!0:c.call(this,a)?this.tabs.length<2||!c.call(this,a-1):!1},e=function(){if(0===this.tabs.length)return this.moveLeftButton.disable(),this.moveRightButton.disable(),void(null!=this.new_tab_button_tabs&&(this.new_tab_button_tabs.enable(),this.new_tab_button_left.disable()));var a=c.call(this,0),b=d.call(this);this.moveLeftButton.setDisabled(a),this.moveRightButton.setDisabled(b),null!=this.new_tab_button_tabs&&(a&&b?(this.new_tab_button_tabs.enable(),this.new_tab_button_left.disable()):(this.new_tab_button_tabs.disable(),this.new_tab_button_left.enable()),this.tabWrapper.repaint())},f=function(){var a;for(a=0;a<this.tabs.length;a+=1)if(c.call(this,a))return a;return null};b.prototype.shiftLeftTabs=function(){this.transitionsQueue.addCommand({type:"shiftLeft"})},b.prototype.shiftRightTabs=function(){this.transitionsQueue.addCommand({type:"shiftRight"})},b.prototype.insertInto=function(a,b){StyledElements.StyledElement.prototype.insertInto.call(this,a,b),this.repaint()},b.prototype.createTab=function(a){var b={initiallyVisible:!1,name:"",tab_constructor:this.Tab};a=StyledElements.Utils.merge(b,a);var c=this.tabsById.push(null);if(a.tab_constructor!=this.Tab&&!(a.tab_constructor.prototype instanceof StyledElements.Tab))throw new TypeError;var d=new a.tab_constructor(c,this,a);this.tabs[this.tabs.length]=d,this.tabsById[c]=d;var f=d.getTabElement();return this.tabArea.appendChild(f,this.new_tab_button_tabs),d.insertInto(this.contentArea),null==this.maxTabElementWidth&&this._computeMaxTabElementWidth(),f.style.maxWidth=this.maxTabElementWidth+"px",this.visibleTab||(this.visibleTab=d,d.setVisible(!0)),e.call(this),a.initiallyVisible&&this.goToTab(c),this.events.tabInsertion.dispatch(this),d},b.prototype.getTab=function(a){return this.tabsById[a]},b.prototype.getTabByLabel=function(a){for(var b=0;b<this.tabs.length;b++)if(this.tabs[b].nameText===a)return this.tabs[b];return null},b.prototype.getVisibleTab=function(){return this.visibleTab},b.prototype.getTabByIndex=function(a){return this.tabs[a]},b.prototype.getTabIndex=function(a){for(var b=0;b<this.tabs.length;b++)if(this.tabs[b].tabId==a)return b;return null},b.prototype.removeTab=function(a){var b,c,d;this.tabsById[a]&&(delete this.tabsById[a],b=this.getTabIndex(a),c=this.tabs.splice(b,1)[0],this.tabArea.removeChild(c.getTabElement()),this.contentArea.removeChild(c.wrapperElement),e.call(this),this.visibleTab===c&&this.tabs.length>0&&(d=this.tabs[b],d||(d=this.tabs[b-1]),this.goToTab(d.tabId)),c.events.close.dispatch(c,this),this.events.tabDeletion.dispatch(this,c))},b.prototype.goToTab=function(a,b){var c,d;if(a instanceof StyledElements.Tab){if(this.tabsById[a.tabId]!==a)throw new TypeError("tab is not owned by this notebook");c=a}else if(c=this.tabsById[a],null==c)throw new TypeError("Invalid tab id");return d=this.visibleTab,null==b&&(b={}),this.visibleTab&&c==this.visibleTab?void(this.focusOnSetVisible&&this.focus(c.tabId)):(this.events.change.dispatch(this,d,c,b.context),this.visibleTab&&this.visibleTab.setVisible(!1),this.visibleTab=c,this.visibleTab.setVisible(!0),this.focusOnSetVisible&&this.focus(c.tabId),void this.events.changed.dispatch(this,d,c,b.context))},b.prototype.getNumberOfTabs=function(){return this.tabs.length},b.prototype.focus=function(a){this.transitionsQueue.addCommand({type:"focus",tabId:a})},b.prototype._computeMaxTabElementWidth=function(){var a,b,c,d;return 0===this.tabs.length?void(this.maxTabElementWidth=null):(a=this.tabArea.wrapperElement.clientWidth,b=this.tabs[0].getTabElement(),c=document.defaultView.getComputedStyle(b,null),null==c.getPropertyCSSValue("display")?void(this.maxTabElementWidth=null):(d=document.defaultView.getComputedStyle(this.tabArea.wrapperElement,null),a-=d.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX),a-=d.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX),void(this.maxTabElementWidth=a)))};var g=function(){var a,b,c,d,e,f;for(this._computeMaxTabElementWidth(),a=0;a<this.tabs.length;a++){for(c=this.tabs[a].getTabElement(),d=this.maxTabElementWidth,e=document.defaultView.getComputedStyle(c,null),d-=e.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX),d-=e.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX),d-=e.getPropertyCSSValue("border-left-width").getFloatValue(CSSPrimitiveValue.CSS_PX),d-=e.getPropertyCSSValue("border-right-width").getFloatValue(CSSPrimitiveValue.CSS_PX),b=1;b<c.childNodes.length;b++)f=document.defaultView.getComputedStyle(c.childNodes[b],null),d-=c.childNodes[b].offsetWidth,d-=f.getPropertyCSSValue("margin-left").getFloatValue(CSSPrimitiveValue.CSS_PX),d-=f.getPropertyCSSValue("margin-right").getFloatValue(CSSPrimitiveValue.CSS_PX);c.style.maxWidth=this.maxTabElementWidth+"px",c.firstChild.style.maxWidth=d+"px"}};b.prototype.repaint=function(a){var b,c;if(a=null!=a?a:!1,this.wrapperElement.classList.contains("full")&&this.fullscreen!==!0){if(c=this._getUsableHeight(),null==c)return;this.wrapperElement.style.height=c+"px"}else this.wrapperElement.style.height="";if(this.tabWrapper.repaint(),g.call(this),e.call(this),a)this.visibleTab&&this.visibleTab.repaint(!0);else for(b=0;b<this.tabs.length;b++)this.tabs[b].repaint(!1)},b.prototype.isDisabled=function(){return null!=this.disabledLayer},b.prototype.setDisabled=function(a){this.isDisabled()!=a&&(a?(this.disabledLayer=document.createElement("div"),this.disabledLayer.classList.add("se-container-disable-layer"),this.wrapperElement.appendChild(this.disabledLayer)):(StyledElements.Utils.removeFromParent(this.disabledLayer),this.disabledLayer=null),this.enabled=!a)},b.prototype.enable=function(){this.setDisabled(!1)},b.prototype.disable=function(){this.setDisabled(!0)},b.prototype.clear=function(){this.tabs=[],this.tabsById=[],this.visibleTab=null,this.tabArea.clear(),this.contentArea.innerHTML="",e.call(this)},b.prototype.addButton=function(a,b){if(!(a instanceof StyledElements.Button||a instanceof StyledElements.Select))throw new TypeError;switch(b=b||"right"){case"left":this.tabWrapper.getWestContainer().appendChild(a,this.moveLeftButton);break;case"right":this.tabWrapper.getEastContainer().appendChild(a)}},b.prototype.requestFullscreen=function(){"requestFullscreen"in this.wrapperElement?this.wrapperElement.requestFullscreen():"msRequestFullscreen"in this.wrapperElement?this.wrapperElement.msRequestFullscreen():"mozRequestFullScreen"in this.wrapperElement?this.wrapperElement.mozRequestFullScreen():"webkitRequestFullscreen"in this.wrapperElement&&this.wrapperElement.webkitRequestFullscreen()},b.prototype.exitFullscreen=function(){this.fullscreen===!0&&("exitFullscreen"in document?document.exitFullscreen():"msExitFullscreen"in document?document.msExitFullscreen():"mozCancelFullScreen"in document?document.mozCancelFullScreen():"webkitExitFullscreen"in document&&document.webkitExitFullscreen())},b.prototype.destroy=function(){StyledElements.Utils.XML.isElement(this.wrapperElement.parentNode)&&StyledElements.Utils.removeFromParent(this.wrapperElement),this.tabs=null,this.tabsById=null,this.visibleTab=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Notebook=b}(),function(a,b){"use strict";var c=function(a,c){arguments.length&&(this.superClass(b.merge({useFullHeight:!0},c)),this.addClassName("hidden"),this.altId=a)};b.inherit(c,a.Container),c.prototype._onhidden=function(b){return b||this.repaint(!1),this.superMember(a.Container,"_onhidden",b)},c.prototype.setVisible=function(a){return a?this.show():this.hide()},c.prototype.isVisible=function(){return!this.hidden},c.prototype.getId=function(){return this.altId},a.Alternative=c}(StyledElements,StyledElements.Utils),function(){"use strict";var a=function b(a){var c={"class":"",full:!0,defaultEffect:"None"};a=StyledElements.Utils.merge(c,a),StyledElements.StyledElement.call(this,["preTransition","postTransition"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.prependWord(a["class"],"alternatives"),this.contentArea=document.createElement("div"),this.contentArea.className="wrapper",this.wrapperElement.appendChild(this.contentArea),this.visibleAlt=null,this.alternatives={},this.alternativeList=[],this.nextAltId=0,a.id&&this.wrapperElement.setAttribute("id",a.id),a.full&&this.wrapperElement.classList.add("full"),this.defaultEffect=a.defaultEffect;var d={alternativesObject:this,inAlternative:null,outAlternative:null,width:null,steps:null,step:null,inc:null},e=function(a,b){var c,d,e=Math.floor(a*b.inc);return b.inc<0?(c=e,d=b.width+e):(c=e,d=-b.width+e),b.inc<0&&d>0||b.inc>0&&c<b.width?(b.outAlternative.wrapperElement.style.left=c+"px",b.inAlternative.wrapperElement.style.left=d+"px",!0):(b.outAlternative.setVisible(!1),b.outAlternative.wrapperElement.style.left="",b.outAlternative.wrapperElement.style.width="",b.inAlternative.wrapperElement.style.left="",b.inAlternative.wrapperElement.style.width="",b.alternativesObject.visibleAlt=b.inAlternative,StyledElements.Utils.callCallback(b.onComplete,b.alternativesObject,b.outAlternative,b.inAlternative),b.alternativesObject.events.postTransition.dispatch(b.alternativesObject,b.outAlternative,b.inAlternative),!1)},f=function(a,c){if(a.outAlternative=a.alternativesObject.visibleAlt,a.inAlternative=c.id,a.onComplete=c.onComplete,null!=a.inAlternative&&(a.inAlternative=a.alternativesObject.alternatives[a.inAlternative]),null==a.inAlternative||a.inAlternative==a.outAlternative)return StyledElements.Utils.callCallback(a.onComplete,a.alternativesObject,a.outAlternative,a.inAlternative),!1;a.alternativesObject.events.preTransition.dispatch(a.alternativesObject,a.outAlternative,a.inAlternative);var d=(new Date).getTime()+150;a.width=a.alternativesObject.wrapperElement.offsetWidth,a.inAlternative.wrapperElement.style.width=a.width+"px",a.outAlternative.wrapperElement.style.width=a.width+"px",a.inAlternative.setVisible(!0);var e=[];switch(a.alternativesObject.defaultEffect){case b.HORIZONTAL_SLICE:a.steps=6;for(var f=0;f<=a.steps;f++)e[f]=d+150*f;a.inc=Math.floor(a.width/a.steps),a.inAlternative.getId()>a.outAlternative.getId()?(a.inAlternative.wrapperElement.style.left=a.width+"px",a.inc=-a.inc):a.inAlternative.wrapperElement.style.left=-a.width+"px";break;default:a.steps=1,e[0]=d,a.inc=Math.floor(a.width/a.steps),a.inAlternative.getId()>a.outAlternative.getId()?(a.inAlternative.wrapperElement.style.left=a.width+"px",a.inc=-a.inc):a.inAlternative.wrapperElement.style.left=-a.width+"px"}return e};this.transitionsQueue=new StyledElements.CommandQueue(d,f,e)};a.prototype=new StyledElements.StyledElement,a.HORIZONTAL_SLICE="HorizontalSlice",a.NONE="HorizontalSlice",a.prototype.repaint=function(a){a=null!=a?a:!1;var b=this._getUsableHeight();null!=b&&(this.wrapperElement.style.height=b+"px",null!=this.visibleAlt&&this.visibleAlt.repaint())},a.prototype.createAlternative=function(a){var b={containerOptions:{},alternative_constructor:StyledElements.Alternative};a=StyledElements.Utils.merge(b,a);var c=this.nextAltId++;if(a.alternative_constructor!==StyledElements.Alternative&&!(a.alternative_constructor.prototype instanceof StyledElements.Alternative))throw new TypeError;var d=new a.alternative_constructor(c,a.containerOptions);return d.insertInto(this.contentArea),this.alternatives[c]=d,this.alternativeList.push(d),this.visibleAlt||(this.visibleAlt=d,d.setVisible(!0)),d},a.prototype.removeAlternative=function(a){var b,c,d=null;if(a instanceof StyledElements.Alternative){if(c=a.getId(),this.alternatives[c]!==a)throw new TypeError("Invalid alternative")}else{if(c=a,null==this.alternatives[c])throw new TypeError("Invalid alternative");
a=this.alternatives[c]}delete this.alternatives[c],b=this.alternativeList.indexOf(a),this.alternativeList.splice(b,1),a.setVisible(!1),this.contentArea.removeChild(a.wrapperElement),this.visibleAlt===a&&(this.alternativeList.length>0?(d=this.alternativeList[b],d||(d=this.alternativeList[b-1]),d.setVisible(!0),this.visibleAlt=d):this.visibleAlt=null,this.events.postTransition.dispatch(this,a,d))},a.prototype.clear=function(){this.alternatives={},this.alternativeList=[],this.nextAltId=0,this.visibleAlt=null,this.contentArea.innerHTML=""},a.prototype.getCurrentAlternative=function(){return this.visibleAlt},a.prototype.showAlternative=function(a,b){var c={};if(null==b&&(b={}),a instanceof StyledElements.Alternative){if(c.id=a.getId(),this.alternatives[c.id]!==a)throw new Error("Invalid alternative")}else if(c.id=a,null==this.alternatives[c.id])throw new Error("Invalid alternative");c.onComplete=b.onComplete,this.transitionsQueue.addCommand(c)},StyledElements.Alternatives=a}(),function(){"use strict";var a=function(a){StyledElements.StyledElement.call(this,[]),this.options=StyledElements.Utils.merge({"class":"",autoHeight:!0},a),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.appendWord(this.options["class"],"se-horizontal-layout"),this.west=new StyledElements.Container({"class":"se-hl-west-container"}),this.center=new StyledElements.Container({"class":"se-hl-center-container"}),this.east=new StyledElements.Container({"class":"se-hl-east-container"}),this.west.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.east.insertInto(this.wrapperElement)};a.prototype=new StyledElements.StyledElement,a.prototype.insertInto=function(a,b){StyledElements.StyledElement.prototype.insertInto.call(this,a,b),this.repaint()},a.prototype.repaint=function(a){var b=this.wrapperElement.offsetWidth,c=this.west.wrapperElement.offsetWidth,d=b-this.east.wrapperElement.offsetWidth,e=d-c;0>e&&(e=0);var f=Math.max(this.west.wrapperElement.offsetHeight,this.center.wrapperElement.offsetHeight,this.east.wrapperElement.offsetHeight);this.center.wrapperElement.style.width=e+"px",this.center.wrapperElement.style.left=c+"px",this.east.wrapperElement.style.left=d+"px",this.options.autoHeight&&(this.wrapperElement.style.height=f+"px"),this.west.repaint(a),this.center.repaint(a),this.east.repaint(a)},a.prototype.getWestContainer=function(){return this.west},a.prototype.getCenterContainer=function(){return this.center},a.prototype.getEastContainer=function(){return this.east},StyledElements.HorizontalLayout=a}(),function(){"use strict";var a=function(a){StyledElements.StyledElement.call(this,[]),a=StyledElements.Utils.merge({"class":""},a),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.appendWord(a["class"],"se-border-layout"),Object.defineProperties(this,{north:{value:new StyledElements.Container({"class":"se-bl-north-container"})},west:{value:new StyledElements.Container({"class":"se-bl-west-container"})},center:{value:new StyledElements.Container({"class":"se-bl-center-container"})},east:{value:new StyledElements.Container({"class":"se-bl-east-container"})},south:{value:new StyledElements.Container({"class":"se-bl-south-container"})}}),this.north.insertInto(this.wrapperElement),this.west.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.east.insertInto(this.wrapperElement),this.south.insertInto(this.wrapperElement)};a.prototype=new StyledElements.StyledElement,a.prototype.repaint=function(a){var b={width:this.wrapperElement.offsetWidth,height:this.wrapperElement.offsetHeight},c=this.north.wrapperElement.offsetHeight,d=b.height-this.south.wrapperElement.offsetHeight,e=d-c;0>e&&(e=0);var f=this.west.wrapperElement.offsetWidth,g=b.width-this.east.wrapperElement.offsetWidth,h=g-f;0>h&&(h=0),this.west.wrapperElement.style.top=c+"px",this.west.wrapperElement.style.height=e+"px",this.center.wrapperElement.style.top=c+"px",this.center.wrapperElement.style.height=e+"px",this.center.wrapperElement.style.width=h+"px",this.center.wrapperElement.style.left=f+"px",this.east.wrapperElement.style.top=c+"px",this.east.wrapperElement.style.height=e+"px",this.east.wrapperElement.style.left=g+"px",this.south.wrapperElement.style.top=d+"px",this.north.repaint(a),this.west.repaint(a),this.center.repaint(a),this.east.repaint(a),this.south.repaint(a)},a.prototype.getNorthContainer=function(){return this.north},a.prototype.getWestContainer=function(){return this.west},a.prototype.getCenterContainer=function(){return this.center},a.prototype.getEastContainer=function(){return this.east},a.prototype.getSouthContainer=function(){return this.south},StyledElements.BorderLayout=a}(),function(){"use strict";var a=function(){var a,b,c,d;for(this.pHeaderCells=[],a=0;a<this.columns.length;a+=1)b=this.columns[a],d=null==b.label?b.field:b.label,c=document.createElement("div"),c.className="se-model-table-cell","string"==typeof b["class"]&&c.classList.add(b["class"]),null!=b.width&&"css"!==b.width&&(c.style.width=b.width),c.textContent=d,b.sortable!==!1&&(c.classList.add("sortable"),c.setAttribute("title",StyledElements.Utils.interpolate(StyledElements.Utils.gettext("Sort by %(column_name)s"),{column_name:d})),c.callback=this.pSortByColumnCallback.bind({widget:this,column:a}),c.addEventListener("click",c.callback,!0)),this.header.appendChild(c),this.pHeaderCells.push(c)},b=function(a,b){var c,d,e;return c=document.defaultView.getComputedStyle(a,null),null==c.getPropertyCSSValue("display")?void(a.style.widht="0"):(d=c.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX),e=c.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX),void(a.style.width=b-d-e+"px"))},c=function(){this._selected_entry_id in this._current_elements&&this._current_elements[this._selected_entry_id].row.classList.add("highlight")},d=function(a){var b,d,e,f,g,h,i,j,k;for(this.pClearTable(),b=0;b<a.length;b+=1){for(e=a[b],h=this.pRowCallback.bind({control:this,item:e}),f=document.createElement("div"),f.className="se-model-table-row",b%2===1&&f.classList.add("odd"),d=0;d<this.columns.length;d+=1)k=this.columns[d],g=document.createElement("div"),g.className="se-model-table-cell",this.columnsCells[d].push(g),"string"==typeof k.width&&"css"!==k.width&&(g.style.width=k.width),"string"==typeof k["class"]&&g.classList.add(k["class"]),k.contentBuilder?j=k.contentBuilder(e):"date"===k.type?""===this.pGetFieldValue(e,k.field)?j="":(i||(i=new Date),j=this.pFormatDate(e,k.field,i,k.dateparser)):"number"===k.type?(j=this.pGetFieldValue(e,k.field),k.unit&&(j=j+" "+k.unit)):j=this.pGetFieldValue(e,k.field),j||(j=""),"string"==typeof j?g.textContent=j:"number"==typeof j||"boolean"==typeof j?g.textContent=""+j:j instanceof StyledElements.StyledElement?(j.insertInto(g),this.pComponents.push(j)):g.appendChild(j),g.addEventListener("click",h,!1),this.pListeners.push({element:g,callback:h}),f.appendChild(g),"function"==typeof this._extract_id&&(this._current_elements[this._extract_id(e)]={row:f,data:e});this.tableBody.appendChild(f)}c.call(this),this.resizeColumns(),this.resizeColumns()},e=function(a,b){if(null==b)this.reload();else{this.pClearTable();var c=document.createElement("div");c.className="alert alert-danger",c.textContent=b,this.tableBody.appendChild(c)}},f=function(b,c){var d,f,g,h,i,j;if(j={initialSortColumn:-1,pageSize:5},c=StyledElements.Utils.merge(j,c),StyledElements.StyledElement.call(this,["click"]),this.columns=b,d=null!=c["class"]?StyledElements.Utils.appendWord("se-model-table",c["class"]):"se-model-table",this.layout=new StyledElements.BorderLayout({"class":d}),this.wrapperElement=this.layout.wrapperElement,this.header=this.layout.getNorthContainer(),this.header.addClassName("se-model-table-headrow"),a.call(this),this.pComponents=[],this.pListeners=[],this.tableBody=this.layout.getCenterContainer(),this.tableBody.addClassName("se-model-table-body"),this.statusBar=this.layout.getSouthContainer(),this.statusBar.addClassName("se-model-table-statusrow"),this.sortColumn=null,null!=c.source)this.source=c.source;else if(null!=c.pagination)this.source=c.pagination;else{for(h={},f=0;f<b.length;f+=1)g=b[f],i=i in g?g.sort_id:g.field,h[i]=g;this.source=new StyledElements.StaticPaginatedSource({pageSize:c.pageSize,sort_info:h})}if(Object.defineProperty(this,"pagination",{get:function(){return this.source}}),this.source.addEventListener("requestEnd",e.bind(this)),0!==this.source.pOptions.pageSize&&(this.paginationInterface=new StyledElements.PaginationInterface(this.source),this.statusBar.appendChild(this.paginationInterface)),-1===c.initialSortColumn){for(f=0;f<this.columns.length;f+=1)if(this.columns[f].sortable!==!1){c.initialSortColumn=f;break}-1===c.initialSortColumn&&(c.initialSortColumn=null)}else if("string"==typeof c.initialSortColumn){for(f=0;f<this.columns.length;f+=1)if(this.columns[f].field===c.initialSortColumn){c.initialSortColumn=f;break}"string"==typeof c.initialSortColumn&&(c.initialSortColumn=null)}this.pSortByColumn(c.initialSortColumn,c.initialDescendingOrder),this._current_elements={},"string"==typeof c.id?this._extract_id=function(a){return a[c.id]}:"function"==typeof c.id&&(this._extract_id=c.id)};f.prototype=new StyledElements.StyledElement,f.prototype.repaint=function(){this.layout.repaint(),this.resizeColumns()},f.prototype.select=function(a){null!==this._selected_entry_id&&this._selected_entry_id in this._current_elements&&this._current_elements[this._selected_entry_id].row.classList.remove("highlight"),null!=a&&(this._selected_entry_id=a,c.call(this))},f.prototype.resizeColumns=function(){var a,c,d,e,f,g=[];for(d=this.tableBody.wrapperElement.clientWidth,a=0;a<this.columns.length;a+=1)"string"!=typeof this.columns[a].width?g.push(a):d-=this.pHeaderCells[a].offsetWidth;for(e=d/g.length,a=0;a<g.length;a+=1)for(f=this.columnsCells[g[a]],b(this.pHeaderCells[g[a]],e),c=0;c<f.length;c+=1)b(f[c],e);for(a=0;a<this.pComponents.length;a+=1)this.pComponents[a].repaint()},f.prototype.pSortByColumn=function(a,b){var c,d,e,f;null!=this.sortColumn&&(e=this.pHeaderCells[this.sortColumn],e.classList.remove("ascending"),e.classList.remove("descending")),this.sortInverseOrder=b,this.sortColumn=a,null!=this.sortColumn?(f=this.pHeaderCells[this.sortColumn],this.sortInverseOrder?(f.classList.remove("ascending"),f.classList.add("descending")):(f.classList.remove("descending"),f.classList.add("ascending")),a=this.columns[this.sortColumn],c=null!=a.sort_id?a.sort_id:a.field,this.sortInverseOrder&&(c="-"+c),d=[c]):d=null,this.source.changeOptions({order:d})},f.prototype.pSortByColumnCallback=function(){var a=this.widget.sortColumn===this.column?!this.widget.sortInverseOrder:!1;this.widget.pSortByColumn(this.column,a)},f.prototype.pGetFieldValue=function(a,b){var c,d,e;for(c="string"==typeof b?[b]:b.slice(),d=a;null!==d&&c.length>0;)e=c.splice(0,1)[0],d=d[e];return null===d||c.length>0?"":d},f.prototype.pFormatDate=function(a,b,c,d){var e,f,g,h,i,j;return e=this.pGetFieldValue(a,b),f="function"==typeof d?d(e):new Date(e),f.locale="es",g=f.getDate()===c.getDate()&&f.getMonth()===c.getMonth()&&f.getFullYear()===c.getFullYear(),h=g?f.strftime("%R"):f.strftime("%x"),i=f.strftime("%c"),j=document.createElement("span"),j.textContent=h,j.setAttribute("title",i),j},f.prototype.pRowCallback=function(){this.control.events.click.dispatch(this.item)},f.prototype.pClearTable=function(){var a,b;for(a=0;a<this.pListeners.length;a+=1)b=this.pListeners[a],b.element.removeEventListener("click",b.callback,!1);for(this.pComponents=[],this.pListeners=[],this.columnsCells=[],a=0;a<this.columns.length;a+=1)this.columnsCells[a]=[];this.tableBody.clear(),this._current_elements={}},f.prototype.reload=function(){d.call(this,this.source.getCurrentPage())},f.prototype.insertInto=function(){StyledElements.StyledElement.prototype.insertInto.apply(this,arguments),this.repaint()},f.prototype.destroy=function(){var a,b;for(a=0;a<this.pHeaderCells.length;a+=1)b=this.pHeaderCells[a],b.callback&&(b.removeEventListener("click",b.callback,!0),b.callback=null);this.pClearTable(),this.layout.destroy(),this.layout=null,this.paginationInterface&&(this.paginationInterface.destroy(),this.paginationInterface=null),this.source.destroy(),this.source=null},StyledElements.ModelTable=f}(),function(){"use strict";var a=function(a){var b=document.createRange();b.selectNodeContents(this.wrapperElement);var c=window.getSelection();c.removeAllRanges(),c.addRange(b),document.addEventListener("mousedown",this._onBlur,!1)},b=function(a){13===a.keyCode?this._onBlur():27===a.keyCode&&(this.wrapperElement.textContent=this._prev_content,this._onBlur())},c=function(a){if(this.wrapperElement.hasAttribute("contenteditable")){document.removeEventListener("mousedown",this._onBlur,!1);var b=this.wrapperElement.textContent;this.wrapperElement.textContent=b,this._prev_content!==b&&this.events.change.dispatch(this,b),this.disableEdition()}},d=function(d){StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("span"),this.setTextContent(d.initialContent),this._onFocus=a.bind(this),this._onKeydown=b.bind(this),this._onBlur=c.bind(this),this.wrapperElement.addEventListener("focus",this._onFocus,!0),this.wrapperElement.addEventListener("keydown",this._onKeydown,!0),this.wrapperElement.addEventListener("blur",this._onBlur,!0)};d.prototype=new StyledElements.StyledElement,d.prototype.disableEdition=function(){this.wrapperElement.hasAttribute("contenteditable")&&(this.wrapperElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeAttribute("contenteditable"),this.wrapperElement.blur(),this.wrapperElement.scrollLeft=0,this.wrapperElement.scrollTop=0)},d.prototype.enableEdition=function(){this.wrapperElement.hasAttribute("contenteditable")||(this.wrapperElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.setAttribute("contenteditable","true"),this._prev_content=this.wrapperElement.textContent),this.wrapperElement.focus()},d.prototype.setTextContent=function(a){return this.wrapperElement.textContent=a,this},d.prototype.destroy=function(){this.wrapperElement.removeEventListener("focus",this._onFocus,!0),this.wrapperElement.removeEventListener("keydown",this._onKeydown,!0),this.wrapperElement.removeEventListener("blur",this._onBlur,!0),this._onFocus=null,this._onKeydown=null,this._onBlur=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.EditableElement=d}(),function(){"use strict";var a=function(a){var b={initialValue:"","class":""};a=StyledElements.Utils.merge(b,a),StyledElements.InputElement.call(this,a.initialValue,[]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.prependWord(a["class"],"styled_hidden_field"),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","hidden"),null!=a.name&&this.inputElement.setAttribute("name",a.name),null!=a.id&&this.wrapperElement.setAttribute("id",a.id),this.inputElement.setAttribute("value",a.initialValue),this.wrapperElement.appendChild(this.inputElement)};a.prototype=new StyledElements.InputElement,StyledElements.HiddenField=a}(),function(){"use strict";var a=function(a){StyledElements.InputElement.call(this,"",["change"]),Object.defineProperty(this,"name",{value:a}),this.buttons=[]};a.prototype=new StyledElements.InputElement,a.prototype.insertButton=function(a){return this.buttons[this.buttons.length]=a,a.addEventListener("change",function(){this.events.change.dispatch(this)}.bind(this)),this},a.prototype.getValue=function(){var a,b=[];if(this.buttons[0]instanceof StyledElements.CheckBox)for(a=0;a<this.buttons.length;a++)this.buttons[a].inputElement.checked&&b.push(this.buttons[a].getValue());else for(a=0;a<this.buttons.length;a++)if(this.buttons[a].inputElement.checked)return[this.buttons[a].getValue()];return b},a.prototype.setValue=function(a){null==a?a=[]:"string"==typeof a&&(a=[a]);for(var b=0;b<this.buttons.length;b++)-1!==a.indexOf(this.buttons[b].inputElement.value)?this.buttons[b].setValue(!0):this.buttons[b].setValue(!1);return this},a.prototype.reset=function(){for(var a=0;a<this.buttons.length;a++)this.buttons[a].reset();return this},a.prototype.getSelectedButtons=function(){var a;if(0===this.buttons.length)return[];if(this.buttons[0]instanceof StyledElements.CheckBox){var b=[];for(a=0;a<this.buttons.length;a++)this.buttons[a].inputElement.checked&&(b[b.length]=this.buttons[a]);return b}for(a=0;a<this.buttons.length;a++)if(this.buttons[a].inputElement.checked)return[this.buttons[a]];return[]},StyledElements.ButtonsGroup=a}(),function(){"use strict";var a=function(a){var b={initialValue:!1,"class":"",group:null,secondInput:null,value:!0};a=StyledElements.Utils.merge(b,a),"initiallyChecked"in a&&(a.initialValue=a.initiallyChecked),StyledElements.InputElement.call(this,a.initialValue,["change"]),this.wrapperElement=document.createElement("input"),this.wrapperElement.className="checkbox",this.wrapperElement.setAttribute("type","checkbox"),this.inputElement=this.wrapperElement,null!=a.name&&this.inputElement.setAttribute("name",a.name),null!=a.id&&this.wrapperElement.setAttribute("id",a.id),this.value=a.value,this.inputElement.setAttribute("value",a.value),this.secondInput=a.secondInput,this.setValue(a.initialValue),a.group instanceof StyledElements.ButtonsGroup?(this.wrapperElement.setAttribute("name",a.group.name),a.group.insertButton(this)):"string"==typeof a.group&&this.wrapperElement.setAttribute("name",a.group),this.inputElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("change",function(){this.enabled&&(null!=this.secondInput&&this.secondInput.setDisabled(!this.inputElement.checked),this.events.change.dispatch(this))}.bind(this),!0)};a.prototype=new StyledElements.InputElement,a.prototype.reset=function(){this.setValue(this.defaultValue)},a.prototype.getValue=function(){return this.value===!0&&null==this.secondInput?this.inputElement.checked:null==this.secondInput?this.inputElement.checked?this.value:null:this.secondInput.getValue()},a.prototype.setValue=function(a){this.inputElement.checked=null!=a&&a!==!1,null!=this.secondInput&&(this.secondInput.setDisabled(!this.inputElement.checked),this.inputElement.checked&&this.secondInput.setValue(a))},StyledElements.CheckBox=a}(),function(){"use strict";var a=function(a){var b={initiallyChecked:!1,"class":"",group:null,value:null};a=StyledElements.Utils.merge(b,a),StyledElements.InputElement.call(this,a.initiallyChecked,["change"]),this.wrapperElement=document.createElement("input"),this.wrapperElement.setAttribute("type","radio"),null!=a.value&&this.wrapperElement.setAttribute("value",a.value),this.inputElement=this.wrapperElement,null!=a.name&&this.inputElement.setAttribute("name",a.name),null!=a.id&&this.wrapperElement.setAttribute("id",a.id),a.initiallyChecked===!0&&this.inputElement.setAttribute("checked",!0),a.group instanceof StyledElements.ButtonsGroup?(this.wrapperElement.setAttribute("name",a.group.name),a.group.insertButton(this)):"string"==typeof a.group&&this.wrapperElement.setAttribute("name",a.group),this.inputElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("click",StyledElements.Utils.stopPropagationListener,!0),this.inputElement.addEventListener("change",function(){this.enabled&&this.events.change.dispatch(this)}.bind(this),!0)};a.prototype=new StyledElements.InputElement,a.prototype.insertInto=function(a,b){var c=this.inputElement.checked;StyledElements.StyledElement.prototype.insertInto.call(this,a,b),this.inputElement.checked=c},a.prototype.reset=function(){return this.inputElement.checked=this.defaultValue,this},a.prototype.setValue=function(a){return this.inputElement.checked=a,this},StyledElements.RadioButton=a}(),function(){"use strict";var a=function(a,b){0!==arguments.length&&(StyledElements.StyledElement.call(this,[]),b.name=a,this._fieldId=a,this._initialValue=b.initialValue,this._defaultValue=b.defaultValue,this._label=b.label,Object.defineProperty(this,"required",{value:"required"in b?!!b.required:!1}),this._readOnly=!!b.readOnly,this._hidden=!!b.hidden,b.description?this._description=b.description:this._description=b.label)};a.prototype=new StyledElements.StyledElement,a.prototype.repaint=function(){this.inputElement.repaint()},a.prototype.getValue=function(){return this.inputElement.getValue()},a.prototype.setValue=function(a){this.isValidValue(a)&&this._setValue(a)},a.prototype.getLabel=function(){return this._label},a.prototype.getDescription=function(){return this._description},a.prototype.getDefaultValue=function(){return this._defaultValue},a.prototype.isEmpty=function(){return this._isEmptyValue(this.getValue())},a.prototype._isEmptyValue=function(a){return""===a||null==a},a.prototype._normalize=function(a){return null==a?"":(""+a).trim()},a.prototype._checkValue=function(a){return StyledElements.InputValidationError.NO_ERROR},a.prototype.checkValue=function(a){if(a=void 0===a?this.getValue():this._normalize(a),!(this instanceof StyledElements.SelectInputInterface)){if(this.required&&this._isEmptyValue(a))return StyledElements.InputValidationError.REQUIRED_ERROR;if(!this.required&&this._isEmptyValue(a))return StyledElements.InputValidationError.NO_ERROR}return this._checkValue(a)},a.prototype.validate=function(){null!=this.timeout&&clearTimeout(this.timeout);var a=this.checkValue();this._setError(a!==StyledElements.InputValidationError.NO_ERROR)},a.prototype.isValidValue=function(a){return this.checkValue(a)===StyledElements.InputValidationError.NO_ERROR},a.prototype._setValue=function(a){a=this._normalize(a),this.inputElement.setValue(a)},a.prototype._setError=function(a){a?this.inputElement.wrapperElement.classList.add("error"):this.inputElement.wrapperElement.classList.remove("error")},a.prototype.resetToDefault=function(){this._setError(!1),this._setValue(this._defaultValue)},a.prototype.reset=function(){this._setError(!1),this._setValue(this._initialValue)},a.prototype.focus=function(){this.inputElement.focus()},a.prototype.setDisabled=function(a){this.inputElement.setDisabled(this._readOnly||a)},a.prototype.enable=function(){this.setDisabled(!1)},a.prototype.disable=function(){this.setDisabled(!0)},a.prototype.insertInto=function(a){this.inputElement.insertInto(a)},a.prototype.assignDefaultButton=function(a){},StyledElements.InputInterface=a}(),function(){"use strict";var a=function(a,b){0!==arguments.length&&(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.TextField(b),this.inputElement.addEventListener("change",function(){null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.validate.bind(this),700)}.bind(this)),this.inputElement.addEventListener("blur",this.validate.bind(this)))};a.prototype=new StyledElements.InputInterface,a.parse=function(a){return a},a.stringify=function(a){return a},a.prototype.assignDefaultButton=function(a){this.inputElement.addEventListener("submit",function(){a.click()})},StyledElements.TextInputInterface=a}(),function(){"use strict";var a,b={};b.NO_ERROR=0,b.REQUIRED_ERROR=1,b.URL_ERROR=2,b.EMAIL_ERROR=3,b.ID_ERROR=4,b.COLOR_ERROR=5,b.BOOLEAN_ERROR=6,b.VERSION_ERROR=7,b.OUT_OF_RANGE_ERROR=8,StyledElements.InputValidationError=b,a=function(){this.fieldsWithErrorById={}},a.prototype._addValidationError=function(a,b){void 0===this.fieldsWithErrorById[a]&&(this.fieldsWithErrorById[a]=[]),this.fieldsWithErrorById[a].push(b)},a.prototype.validate=function(a){var b=a.checkValue();b!==StyledElements.InputValidationError.NO_ERROR?(a._setError(!0),this._addValidationError(b,a.getLabel())):a._setError(!1)},a.prototype._buildErrorMsg=function(a){var b,c,d;switch(a=parseInt(a,10)){case StyledElements.InputValidationError.REQUIRED_ERROR:b=StyledElements.Utils.gettext("The following required fields are empty: %(fields)s.");break;case StyledElements.InputValidationError.URL_ERROR:b=StyledElements.Utils.gettext("The following fields do not contain a valid URL: %(fields)s.");break;case StyledElements.InputValidationError.EMAIL_ERROR:b=StyledElements.Utils.gettext("The following fields do not contain a valid E-Mail address: %(fields)s.");break;case StyledElements.InputValidationError.VERSION_ERROR:b=StyledElements.Utils.gettext("The following field do not contain a valid version number: %(fields)s.");break;case StyledElements.InputValidationError.ID_ERROR:b=StyledElements.Utils.gettext("The following fields contain invalid characters: %(fields)s.");break;case StyledElements.InputValidationError.COLOR_ERROR:b=StyledElements.Utils.gettext("The following fields do not contain a valid color value: %(fields)s.");break;case StyledElements.InputValidationError.OUT_OF_RANGE_ERROR:b=StyledElements.Utils.gettext("The following fields does contain an out of range value: %(fields)s.")}for(c="",d=0;d<this.fieldsWithErrorById[a].length;d+=1)c+=", "+this.fieldsWithErrorById[a][d];return c=c.substring(2),StyledElements.Utils.interpolate(b,{fields:c})},a.prototype.toHTML=function(){var a,b=[];for(a in this.fieldsWithErrorById)this.fieldsWithErrorById.hasOwnProperty(a)&&b.push(this._buildErrorMsg(a));return b},StyledElements.ValidationErrorManager=a;var c=function(a,b){0!==arguments.length&&(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.PasswordField(b))};c.prototype=new StyledElements.InputInterface,c.parse=StyledElements.TextInputInterface.parse,c.stringify=StyledElements.TextInputInterface.stringify,StyledElements.PasswordInputInterface=c;var d=function(a,b){0!==arguments.length&&(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.List(b))};d.prototype=new StyledElements.InputInterface,d.prototype.parse=function(a){return JSON.parse(a)},d.prototype.stringify=function(a){return JSON.stringify(a)},d.prototype._normalize=function(a){Array.isArray(a)||(a=[])},d.prototype._setValue=function(a){this.inputElement.cleanSelection(),this.inputElement.addSelection(a)},d.prototype.getValue=function(){return this.inputElement.getSelection()},d.prototype.isEmpty=function(){return 0===this.getValue().length},StyledElements.ListInputInterface=d;var e=function(a,b){0!==arguments.length&&(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.NumericField(b))};e.prototype=new StyledElements.InputInterface,e.parse=function(a){return Number(a)},e.prototype._normalize=function(a){return Number(a)},e.prototype._checkValue=function(a){return!Number.isFinite(a)||a<this.inputElement.options.min||a>this.inputElement.options.max?StyledElements.InputValidationError.OUT_OF_RANGE_ERROR:StyledElements.InputValidationError.NO_ERROR},StyledElements.NumberInputInterface=e;var f=function(a,b){StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.TextArea(b),this.events.blur=this.inputElement.events.blur};f.prototype=new StyledElements.InputInterface,f.parse=StyledElements.TextInputInterface.parse,f.stringify=StyledElements.TextInputInterface.stringify,StyledElements.LongTextInputInterface=f;var g=function(a,b){0!==arguments.length&&StyledElements.TextInputInterface.call(this,a,b)};g.prototype=new StyledElements.TextInputInterface,g.parse=StyledElements.TextInputInterface.parse,g.stringify=StyledElements.TextInputInterface.stringify,g.prototype._URLChecker=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,g.prototype._checkValue=function(a){return this._URLChecker.test(a)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.URL_ERROR},StyledElements.URLInputInterface=g;var h=function(a,b){StyledElements.TextInputInterface.call(this,a,b)};h.prototype=new StyledElements.TextInputInterface,h.prototype._EMailChecker=/^[\w\d._%+-]+@[\w\d.\-]+\.[\w]{2,4}$/,h.prototype._checkValue=function(a){return this._EMailChecker.test(a)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.EMAIL_ERROR},StyledElements.EMailInputInterface=h;var i=function(a,b){StyledElements.InputInterface.call(this,a,b),"string"==typeof b.initialValue?b.initiallyChecked="true"===b.initialValue.toLowerCase():"boolean"==typeof b.initialValue&&(b.initiallyChecked=b.initialValue),this.inputElement=new StyledElements.CheckBox(b)};i.prototype=new StyledElements.InputInterface,i.parse=function(a){return"true"===(""+a).trim().toLowerCase()},i.stringify=function(a){return""+a},i.prototype.isEmpty=function(){return!1},i.prototype._normalize=function(a){return!!a},i.prototype._checkValue=function(a){return"boolean"==typeof a?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.BOOLEAN_ERROR},StyledElements.BooleanInputInterface=i;var j=function(a,b){if("required"in b||(b.required=!0),StyledElements.InputInterface.call(this,a,b),"function"==typeof b.entries)this._update=b.entries;else if(b.initialEntries&&!this.required){var c,d=!1;for(c=0;c<b.initialEntries.length;c+=1)if(this._isEmptyValue(b.initialEntries[c].value)){d=!0;break}d||(b.initialEntries=[{label:"---------",value:null}].concat(b.initialEntries))}this.inputElement=new StyledElements.Select(b)};j.prototype=new StyledElements.InputInterface,j.parse=function(a){return a},j.stringify=function(a){return""+a},j.prototype._setValue=function(a){var b;this._update&&(this.inputElement.clear(),b=this._update(),this.required||(b=[{label:"---------",value:null}].concat(b)),this.inputElement.addEntries(b)),this.inputElement.setValue(a)},j.prototype._checkValue=function(a){var b;if("string"!=typeof a)try{b=this.inputElement.idFunc(a)}catch(c){}else b=a;return"string"==typeof b&&b in this.inputElement.optionValues?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.OUT_OF_RANGE_ERROR},StyledElements.SelectInputInterface=j;var k=function(a,b){StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.StyledHiddenField(b)};k.prototype=new StyledElements.InputInterface,StyledElements.HiddenInputInterface=k;var l=function(a,b){var c,d,e,f,g;if(0!==arguments.length){switch(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.ButtonsGroup(a),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="button_group",b.kind){case"radio":c=StyledElements.RadioButton;break;case"checkbox":c=StyledElements.CheckBox;break;default:throw new Error}for(e=0;e<b.buttons.length;e+=1)d=b.buttons[e],g=document.createElement("label"),g.className=b.kind,f=new c({group:this.inputElement,value:d.value,secondInput:d.secondInput}),f.insertInto(g),g.appendChild(document.createTextNode(d.label)),d.secondInput&&d.secondInput.insertInto(g),this.wrapperElement.appendChild(g);"initialValue"in b&&this.inputElement.setValue(b.initialValue)}};l.prototype=new StyledElements.InputInterface,l.prototype.insertInto=function(a){a.appendChild(this.wrapperElement)},l.prototype._setValue=function(a){this.inputElement.setValue(a)},l.prototype._setError=function(a){},StyledElements.ButtonGroupInputInterface=l;var m=function(a,b){StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.StyledFileField(b)};m.prototype=new StyledElements.InputInterface,m.prototype.getValue=function(){return this.inputElement.getValue()},m.prototype._setValue=function(a){},m.prototype._setError=function(a){},m.prototype.setDisabled=function(a){this.inputElement.disabled=!!a},StyledElements.FileInputInterface=m;var n=function(a,b){this.entries=[],this.fields=b.fields,this.wrapperElement=new StyledElements.Container,this._addEntry()};n.prototype=new StyledElements.InputInterface,n.prototype._addEntry=function(){var a,b;return a={},a.wrapper=document.createElement("div"),
b={"":{type:"lineLayout",fields:this.fields}},a.form=new Form(b,{useHtmlForm:!1,acceptButton:!1,cancelButton:!1,legend:!1}),a.form.wrapperElement.style.display="inline-block",a.form.wrapperElement.style.verticalAlign="middle",a.form.insertInto(a.wrapper),a.addRowButton=new StyledElements.Button({text:"+"}),a.addRowButton.addEventListener("click",function(){this._addEntry()}.bind(this)),a.addRowButton.insertInto(a.wrapper),a.removeRowButton=new StyledElements.Button({text:"-"}),a.removeRowButton.addEventListener("click",function(){this.control._removeEntry(a)}.bind({control:this,entry:a})),a.removeRowButton.insertInto(a.wrapper),this.entries.push(a),this.wrapperElement.appendChild(a.wrapper),a},n.prototype._removeEntry=function(a){var b;this.wrapperElement.removeChild(a.wrapper),b=this.entries.indexOf(a),this.entries.splice(b,1),a.form.destroy(),0===this.entries.length&&this._addEntry()},n.prototype._removeAllEntries=function(){var a,b;for(a=0;a<this.entries.length;a+=1)b=this.entries[a],this.wrapperElement.removeChild(b.wrapper),b.form.destroy();this.entries=[]},n.prototype.getValue=function(){var a,b=[];for(a=0;a<this.entries.length;a+=1)b.push(this.entries[a].form.getData());return b},n.prototype._setValue=function(a){var b,c;for(this._removeAllEntries(),a instanceof Array||(a=[]),b=0;b<a.length;b+=1)c=this._addEntry(),c.form.setData(a[b]);0===this.entries.length&&this._addEntry()},n.prototype._setError=function(a){},StyledElements.MultivaluedInputInterface=n;var o=function(a,b,c){this.form=new Form(b.fields,{factory:c,useHtmlForm:!1,acceptButton:!1,cancelButton:!1,legend:!1})};o.prototype=new StyledElements.InputInterface,o.prototype.repaint=function(){return this.form.repaint()},o.prototype.insertInto=function(a){this.form.insertInto(a)},o.prototype.getValue=function(){return this.form.getData()},o.prototype._setValue=function(a){return this.form.setData(a)},o.prototype._setError=function(a){},StyledElements.FieldSetInterface=o}(),function(){"use strict";var a=/^([1-9]\d*|0)(?:\.([1-9]\d*|0))*$/,b=function(a,b){null==b&&(b={}),null==b.placeholder&&(b.placeholder="1.0"),StyledElements.TextInputInterface.call(this,a,b)};b.prototype=new StyledElements.TextInputInterface,b.prototype._checkValue=function(b){return null!=b.match(a)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.VERSION_ERROR},StyledElements.VersionInputInterface=b}(),function(){"use strict";var a={"boolean":StyledElements.BooleanInputInterface,text:StyledElements.TextInputInterface,version:StyledElements.VersionInputInterface,password:StyledElements.PasswordInputInterface,hidden:StyledElements.HiddenInputInterface,list:StyledElements.ListInputInterface,number:StyledElements.NumberInputInterface,longtext:StyledElements.LongTextInputInterface,url:StyledElements.URLInputInterface,email:StyledElements.EMailInputInterface,select:StyledElements.SelectInputInterface,buttons:StyledElements.ButtonGroupInputInterface,file:StyledElements.FileInputInterface,fieldset:StyledElements.FieldSetInterface,multivalued:StyledElements.MultivaluedInputInterface},b=function(){var b=StyledElements.Utils.clone(a);this.createInterface=function(a,c){var d=b[c.type];if(null==d)throw new Error(c.type);var e=new d(a,c,this);return c.initiallyDisabled&&e.disable(),e},this.addFieldType=function(a,c){if(!(c.prototype instanceof StyledElements.InputInterface))throw new TypeError;if(void 0!==b[a])throw new Error;b[a]=c},this.parse=function(a,c){if(null==b[a])throw new TypeError("Invalid data type");return b[a].parse(c)},this.stringify=function(a,c){if(null==b[a])throw new TypeError("Invalid data type");return b[a].stringify(c)}};StyledElements.InputInterfaceFactory=b}(),function(){"use strict";StyledElements.DefaultInputInterfaceFactory=new StyledElements.InputInterfaceFactory}(),function(){"use strict";var a=function(a,d){var e,f,g;g={readOnly:!1,buttonArea:null,setdefaultsButton:!1,resetButton:!1,acceptButton:!0,cancelButton:!0,useHtmlForm:!0,legend:"auto",edition:!1,factory:StyledElements.DefaultInputInterfaceFactory},d&&d.readOnly&&(g.acceptButton=!1,g.cancelButton=!1),d=StyledElements.Utils.merge(g,d),this.setdefaultsButton=null,d.setdefaultsButton instanceof StyledElements.Button?this.setdefaultsButton=d.setdefaultsButton:d.setdefaultsButton===!0&&(this.setdefaultsButton=new StyledElements.Button({usedInForm:d.useHtmlForm,text:StyledElements.Utils.gettext("Set Defaults")})),this.resetButton=null,d.resetButton instanceof StyledElements.Button?this.resetButton=d.resetButton:d.resetButton===!0&&(this.resetButton=new StyledElements.Button({usedInForm:d.useHtmlForm,text:StyledElements.Utils.gettext("Reset")})),this.acceptButton=null,d.acceptButton instanceof StyledElements.Button?this.acceptButton=d.acceptButton:d.acceptButton===!0&&(this.acceptButton=new StyledElements.Button({usedInForm:d.useHtmlForm,"class":"btn-primary",text:StyledElements.Utils.gettext("Accept")})),this.cancelButton=null,d.cancelButton instanceof StyledElements.Button?this.cancelButton=d.cancelButton:d.cancelButton===!0&&(this.cancelButton=new StyledElements.Button({usedInForm:d.useHtmlForm,text:StyledElements.Utils.gettext("Cancel")})),StyledElements.StyledElement.call(this,["submit","cancel"]),this.childComponents=[],this.readOnly=d.readOnly,this.fields={},this.fieldInterfaces={},this.edition=d.edition,this.factory=d.factory,e=document.createElement("div"),d.useHtmlForm?(this.wrapperElement=document.createElement("form"),this.wrapperElement.addEventListener("submit",function(a){a.preventDefault()},!0),this.wrapperElement.appendChild(e)):this.wrapperElement=e,e.appendChild(this.pBuildFieldTable(a)),this.wrapperElement.className="styled_form",this.msgElement=document.createElement("div"),this.msgElement.className="alert alert-error",e.appendChild(this.msgElement),this.pSetMsgs([]),null!=d.buttonArea?f=d.buttonArea:(d.acceptButton!==!1||d.cancelButton!==!1)&&(f=document.createElement("div"),f.className="buttons",e.appendChild(f)),null!=this.setdefaultsButton&&(this.setdefaultsButton.addEventListener("click",this.defaults.bind(this)),this.setdefaultsButton.insertInto(f)),null!=this.resetButton&&(this.resetButton.addEventListener("click",this.reset.bind(this)),this.resetButton.insertInto(f)),null!=this.acceptButton&&(this.acceptButton.addEventListener("click",b.bind(this)),this.acceptButton.insertInto(f)),null!=this.cancelButton&&(this.cancelButton.addEventListener("click",c.bind(this)),this.cancelButton.insertInto(f))};a.prototype=new StyledElements.StyledElement,a.prototype.repaint=function(a){var b;for(b=0;b<this.childComponents.length;b+=1)this.childComponents[b].repaint(a);for(b in this.fieldInterfaces)this.fieldInterfaces[b].repaint()},a.prototype.pSetMsgs=function(a){var b,c;if(this.msgElement.innerHTML="",a.length>0){for(b=0;b<a.length;b+=1)c=document.createElement("p"),c.textContent=a[b],this.msgElement.appendChild(c);this.msgElement.style.display=""}else this.msgElement.style.display="none"},a.prototype.pBuildFieldGroups=function(a){var b,c,d,e,f,g;for(b=new StyledElements.Notebook({full:!1}),this.childComponents.push(b),c=0;c<a.length;c+=1)d=a[c],e=b.createTab({name:d.shortTitle,closable:!1}),e.addEventListener("show",this.repaint.bind(this)),d.nested===!0?(f={name:d.name,type:"fieldset",fields:d.fields},g=this.factory.createInterface(d.name,f),g.assignDefaultButton(this.acceptButton),this.fieldInterfaces[d.name]=g,this.fields[d.name]=f,e.appendChild(g)):e.appendChild(this.pBuildFieldTable(d.fields));return b.wrapperElement},a.prototype.pBuildFieldTable=function(a){var b,c,d,e,f,g;if(a[0]&&"group"===a[0].type)return this.pBuildFieldGroups(a);b=document.createElement("table"),b.setAttribute("cellspacing","0"),b.setAttribute("cellpadding","0"),c=document.createElement("tbody"),b.appendChild(c);for(d in a)if(a.hasOwnProperty(d))switch(e=a[d],"name"in e&&(d=e.name),f=c.insertRow(-1),e.type){case"columnLayout":g=f.insertCell(-1),g.setAttribute("colspan",2),this.pInsertColumnLayout(e,g);break;case"lineLayout":g=f.insertCell(-1),g.setAttribute("colspan",2),this.pInsertLineLayout(e,g);break;case"hidden":f.className="hidden",this.pInsertField(d,e,f);break;default:this.pInsertField(d,e,f)}return b},a.prototype.pInsertColumnLayout=function(a,b){var c,d,e,f,g;for(c=document.createElement("table"),c.setAttribute("cellspacing","0"),c.setAttribute("cellpadding","0"),d=document.createElement("tbody"),c.appendChild(d),e=d.insertRow(-1),g=0;g<a.columns.length;g+=1)f=e.insertCell(-1),f.appendChild(this.pBuildFieldTable(a.columns[g]));b.appendChild(c)},a.prototype.pInsertLineLayout=function(a,b){var c,d,e,f;for(d in a.fields)a.fields.hasOwnProperty(d)&&(c=a.fields[d],e=this.factory.createInterface(d,c),e.assignDefaultButton(this.acceptButton),e.insertInto(b),f=null,e.wrapperElement&&e.wrapperElement.wrapperElement?f=e.wrapperElement.wrapperElement:e.inputElement&&e.inputElement.wrapperElement&&(f=e.inputElement.wrapperElement),f&&(f.style.display="inline-block",f.style.verticalAlign="middle"),this.fieldInterfaces[d]=e,this.fields[d]=c)},a.prototype.pInsertField=function(a,b,c){var d,e,f,g,h,i,j,k;return"separator"===b.type?(d=c.insertCell(-1),d.setAttribute("colspan","2"),e=document.createElement("hr"),void d.appendChild(e)):"label"===b.type?(f=c.insertCell(-1),f.setAttribute("colspan","2"),f.addClassName("label-row"),b.url?(h=document.createElement("a"),h.setAttribute("href",b.url),h.setAttribute("target","_blank")):h=document.createElement("label"),h.appendChild(document.createTextNode(b.label)),void f.appendChild(h)):(k=this.factory.createInterface(a,b),g=c.insertCell(-1),g.classList.add("label-cell"),h=document.createElement("label"),h.textContent=b.label,g.appendChild(h),null!=b.description&&h.setAttribute("title",b.description),b.required&&!this.readOnly&&(i=document.createElement("span"),i.appendChild(document.createTextNode("*")),i.className="required_mark",g.appendChild(i)),j=document.createElement("td"),c.appendChild(j),k.assignDefaultButton(this.acceptButton),k.insertInto(j),(this.readOnly||k._readOnly)&&k.setDisabled(!0),this.fieldInterfaces[a]=k,void(this.fields[a]=b))},a.prototype.extraValidation=function(a){return[]},a.prototype.getData=function(){var a,b,c;a={};for(b in this.fieldInterfaces)this.fieldInterfaces.hasOwnProperty(b)&&(c=this.fieldInterfaces[b],a[b]=c.getValue());return a},a.prototype.setData=function(a){var b,c;if("object"!=typeof a&&"undefined"!=typeof a)throw new TypeError;if(this.pSetMsgs([]),null!=a)for(c in this.fieldInterfaces)b=this.fieldInterfaces[c],b._setValue(a[c]);else for(c in this.fields)b=this.fieldInterfaces[c],b.reset()},a.prototype.is_valid=function(){var a,b,c,d=new StyledElements.ValidationErrorManager;for(a in this.fieldInterfaces)this.fieldInterfaces.hasOwnProperty(a)&&d.validate(this.fieldInterfaces[a]);return b=this.extraValidation(this.fields),c=d.toHTML(),null!==b&&(c=c.concat(b)),this.pSetMsgs(c),0===c.length};var b=function(){if(this.is_valid()){var a=this.getData();this.events.submit.dispatch(this,a)}},c=function(){this.events.cancel.dispatch(this)};a.prototype.reset=function(){return this.setData(),this},a.prototype.defaults=function(){var a,b;this.pSetMsgs([]);for(b in this.fields)a=this.fieldInterfaces[b],a.setValue(a._defaultValue);return this},a.prototype.normalSubmit=function(a,b,c){c=c?c:{},this.wrapperElement.method=a,this.wrapperElement.action=b,c.enctype?this.wrapperElement.setAttribute("enctype",c.enctype):this.wrapperElement.removeAttribute("enctype"),c.target?this.wrapperElement.setAttribute("target",c.target):this.wrapperElement.removeAttribute("target"),this.wrapperElement.submit()},a.prototype.destroy=function(){var a=0;for(a=0;a<this.childComponents.length;a+=1)this.childComponents[a].destroy();this.childComponents=null,this.setdefaultsButton&&(this.setdefaultsButton.destroy(),this.setdefaultsButton=null),this.resetButton&&(this.resetButton.destroy(),this.resetButton=null),this.acceptButton&&(this.acceptButton.destroy(),this.acceptButton=null),this.cancelButton&&(this.cancelButton.destroy(),this.cancelButton=null)},a.prototype.setDisabled=function(a){var b,c;if(this.enabled==a){a?this.wrapperElement.classList.add("disabled"):this.wrapperElement.classList.remove("disabled");for(b in this.fieldInterfaces)c=this.fieldInterfaces[b],c.setDisabled(a||this.readOnly||c._readOnly);null!=this.acceptButton&&this.acceptButton.setDisabled(a),null!=this.cancelButton&&this.cancelButton.setDisabled(a),this.enabled=!a}},a.prototype.enable=function(){this.setDisabled(!1)},a.prototype.disable=function(){this.setDisabled(!0)},a.prototype.insertInto=function(a,b){StyledElements.StyledElement.prototype.insertInto.call(this,a,b),this.repaint()},StyledElements.Form=a}(),function(){"use strict";var a,b,c,d,e;a=new StyledElements.GUIBuilder,b=function(a){this.autoHide&&1===this.source.totalPages?this.wrapperElement.style.display="none":this.wrapperElement.style.display="",this.totalPagesLabel.textContent=this.source.totalPages,this.currentPageLabel.textContent=this.source.currentPage,this.totalCountLabel.textContent=this.source.totalCount,c.call(this)},c=function(){this.source.currentPage<=1?(this.prevBtn.disable(),this.firstBtn.disable()):(this.prevBtn.enable(),this.firstBtn.enable()),this.source.currentPage>=this.source.totalPages?(this.nextBtn.disable(),this.lastBtn.disable()):(this.nextBtn.enable(),this.lastBtn.enable())},d=function(b){var c={firstBtn:this.firstBtn,prevBtn:this.prevBtn,nextBtn:this.nextBtn,lastBtn:this.lastBtn,currentPage:this.currentPageLabel,totalPages:this.totalPagesLabel,totalCount:this.totalCountLabel},d=a.parse(b,c);this.wrapperContainer.appendChild(d)},e=function(a,e){var f={layout:StyledElements.Utils.gettext('<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><t:firstBtn/><t:prevBtn/><div class="box">Page: <t:currentPage/>/<t:totalPages/></div><t:nextBtn/><t:lastBtn/></s:styledgui>'),autoHide:!1};e=StyledElements.Utils.merge(f,e),this.autoHide=e.autoHide,StyledElements.StyledElement.call(this,[]),this.source=a,this.wrapperContainer=new StyledElements.Container,this.wrapperContainer.addClassName("pagination"),this.wrapperElement=this.wrapperContainer.wrapperElement,this.firstBtn=new StyledElements.Button({iconClass:"icon-first-page"}),this.firstBtn.addEventListener("click",a.goToFirst.bind(a)),this.prevBtn=new StyledElements.Button({iconClass:"icon-prev-page"}),this.prevBtn.addEventListener("click",a.goToPrevious.bind(a)),this.nextBtn=new StyledElements.Button({iconClass:"icon-next-page"}),this.nextBtn.addEventListener("click",a.goToNext.bind(a)),this.lastBtn=new StyledElements.Button({iconClass:"icon-last-page"}),this.lastBtn.addEventListener("click",a.goToLast.bind(a)),this.currentPageLabel=document.createElement("span"),this.currentPageLabel.classList.add("current-page"),this.totalPagesLabel=document.createElement("span"),this.totalPagesLabel.classList.add("total-pages"),this.totalCountLabel=document.createElement("span"),this.totalCountLabel.classList.add("total-count"),d.call(this,e.layout),this.currentPageLabel.textContent=this.currentPage+1,this.totalPagesLabel.textContent=this.totalPages,c.call(this),this.source.addEventListener("requestEnd",b.bind(this))},e.prototype=new StyledElements.StyledElement,e.prototype.changeLayout=function(a){d.call(this,a)},StyledElements.PaginationInterface=e}(),function(){"use strict";var a=new StyledElements.GUIBuilder,b='<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><div class="popover fade"><div class="arrow"/><h3 class="popover-title"><t:title/></h3><div class="popover-content"><t:content/></div></div></s:styledgui>',c=function(a){0===a.button&&setTimeout(this.hide.bind(this),0)},d=function(a,b){switch(this.element.classList.remove("top","right","bottom","left"),b){case"top":this.element.classList.add("top"),this.element.style.left=a.left+(a.width-this.element.offsetWidth)/2+"px",this.element.style.top=a.top-this.element.offsetHeight+"px";break;case"right":this.element.classList.add("right"),this.element.style.left=a.right+"px",this.element.style.top=a.top+(a.height-this.element.offsetHeight)/2+"px";break;case"bottom":this.element.classList.add("bottom"),this.element.style.left=a.left+(a.width-this.element.offsetWidth)/2+"px",this.element.style.top=a.bottom+"px";break;case"left":this.element.classList.add("left"),this.element.style.left=a.left-this.element.offsetWidth+"px",this.element.style.top=a.top+(a.height-this.element.offsetHeight)/2+"px"}},e=function(){var a=this.element.parentElement.getBoundingClientRect(),b=this.element.getBoundingClientRect(),c=b.width-Math.max(b.right-a.right,0)-Math.max(a.left-b.left,0),d=b.height-Math.max(b.bottom-a.bottom,0)-Math.max(a.top-b.top,0),e=b.width*b.height,f=c*d;return e-f},f=function(a,b,c){var e=Math.min.apply(Math,b),f=b.indexOf(e),g=c[f];d.call(this,a,g);var h=this.element.parentElement.getBoundingClientRect(),i=this.element.getBoundingClientRect();i.bottom>h.bottom&&(this.element.style.top="",this.element.style.bottom="10px",i=this.element.getBoundingClientRect()),i.top<h.top&&(this.element.style.top="10px")},g=function(a,b){var c=0,g=[];do d.call(this,a,b[c]),g.push(e.call(this)),c+=1;while(g[c-1]>0&&c<b.length);g[c-1]>0&&f.call(this,a,g,b)},h=function(c){return Wirecloud.UserInterfaceManager._registerPopup(this),this.visible?void this.repaint():("getBoundingClientRect"in c&&(c=c.getBoundingClientRect()),this.element=a.parse(b,{title:this.options.title,content:this.options.content}).elements[0],document.body.appendChild(this.element),document.addEventListener("click",this._disableCallback,!0),g.call(this,c,this.options.placement),void this.element.classList.add("in"))},i=function(a){var b={content:"",title:"","class":"",html:!1,placement:["right","bottom","left","top"]};Object.defineProperty(this,"options",{value:StyledElements.Utils.merge(b,a)}),StyledElements.StyledElement.call(this,[]),Object.defineProperties(this,{visible:{get:function(){return null!=this.element}},_disableCallback:{value:c.bind(this),enumerable:!1},_show:{value:h.bind(this),enumerable:!1}})};i.prototype=new StyledElements.StyledElement,i.prototype.bind=function(a,b){switch(b){case"click":a.addEventListener("click",this.toggle.bind(this),!0);break;case"hover":break;default:throw new TypeError("Invalid mode: "+b)}},i.prototype.toggle=function(a){this.visible?this.hide():this._show(a)},i.prototype.show=function(a){this._show(a)};var j=function(){null!=this.element&&(document.body.removeChild(this.element),this.element=null,Wirecloud.UserInterfaceManager._unregisterPopup(this))};i.prototype.hide=function(){this.visible&&(document.removeEventListener("click",this._disableCallback,!0),this.element.classList.contains("in")?(this.element.addEventListener("transitionend",j.bind(this)),this.element.classList.remove("in")):j.call(this))},StyledElements.Popover=i}();